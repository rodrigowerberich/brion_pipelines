<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ASML Brion Software case: pipelines: clipp - command line interfaces for modern C++</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ASML Brion Software case: pipelines<span id="projectnumber">&#160;v2.0</span>
   </div>
   <div id="projectbrief">Organize pipeline logs by gathering logs from the same pipeline, decoding them and putting them in order</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__2mnt_2c_2Users_2rodri_2Documents_2Brion-Assignment_2brion__pipelines_2components_2clipp_2README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">clipp - command line interfaces for modern C++</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/muellan/clipp"><img src="https://travis-ci.org/muellan/clipp.svg?branch=master" alt="Linux build status" style="pointer-events: none;" class="inline"/></a> <a href="https://ci.appveyor.com/project/muellan/clipp"><img src="https://ci.appveyor.com/api/projects/status/ci29ngpfks980i7g?svg=true" alt="MSVC build status" class="inline"/></a></p>
<p>Easy to use, powerful and expressive command line argument handling for C++11/14/17 contained in a <b>single header file</b>.</p>
<ul>
<li>options, options+value(s), positional values, positional commands, nested alternatives, decision trees, joinable flags, custom value filters, ...</li>
<li>documentation generation (usage lines, man pages); error handling</li>
<li>lots of examples; large set of tests</li>
<li>### Quick Reference Table</li>
<li>### Overview (short examples)</li>
<li>### Detailed Examples</li>
<li>#### Why yet another library for parsing command line arguments? / Design goals</li>
<li>#### Requirements / Compilers</li>
</ul>
<h1><a class="anchor" id="autotoc_md0"></a>
Quick Intro</h1>
<h2><a class="anchor" id="autotoc_md1"></a>
Simple Use Case â€” Simple Setup!</h2>
<p>Consider this command line interface: </p><div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">    convert &lt;input file&gt; [-r] [-o &lt;output format&gt;] [-utf16]</div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">    -r, --recursive  convert files recursively</div>
<div class="line">    -utf16           use UTF-16 encoding</div>
</div><!-- fragment --><p> Here is the code that defines the positional value <code>input file</code> and the three options <code>-r</code>, <code>-o</code> and <code>-utf16</code>. If parsing fails, the above default man page-like snippet will be printed to stdout. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;clipp.h&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceclipp.html">clipp</a>; <span class="keyword">using </span>std::cout; <span class="keyword">using </span>std::string;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) { </div>
<div class="line">    <span class="keywordtype">bool</span> rec = <span class="keyword">false</span>, utf16 = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordtype">string</span> infile = <span class="stringliteral">&quot;&quot;</span>, fmt = <span class="stringliteral">&quot;csv&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> cli = (</div>
<div class="line">        value(<span class="stringliteral">&quot;input file&quot;</span>, infile),</div>
<div class="line">        option(<span class="stringliteral">&quot;-r&quot;</span>, <span class="stringliteral">&quot;--recursive&quot;</span>).set(rec).doc(<span class="stringliteral">&quot;convert files recursively&quot;</span>),</div>
<div class="line">        option(<span class="stringliteral">&quot;-o&quot;</span>) &amp; value(<span class="stringliteral">&quot;output format&quot;</span>, fmt),</div>
<div class="line">        option(<span class="stringliteral">&quot;-utf16&quot;</span>).set(utf16).doc(<span class="stringliteral">&quot;use UTF-16 encoding&quot;</span>)</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(!parse(argc, argv, cli)) cout &lt;&lt; make_man_page(cli, argv[0]);</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
<div class="ttc" id="anamespaceclipp_html"><div class="ttname"><a href="namespaceclipp.html">clipp</a></div><div class="ttdoc">primary namespace</div><div class="ttdef"><b>Definition</b> clipp.h:55</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2"></a>
A More Complex Example:</h2>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">    finder make &lt;wordfile&gt; -dict &lt;dictionary&gt; [--progress] [-v]</div>
<div class="line">    finder find &lt;infile&gt;... -dict &lt;dictionary&gt; [-o &lt;outfile&gt;] [-split|-nosplit] [-v] </div>
<div class="line">    finder help [-v]</div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">    --progress, -p           show progress                       </div>
<div class="line">    -o, --output &lt;outfile&gt;   write to file instead of stdout</div>
<div class="line">    -split, -nosplit         (do not) split output</div>
<div class="line">    -v, --version            show version</div>
</div><!-- fragment --><p> This CLI has three alternative commands (<code>make</code>, <code>find</code>, <code>help</code>), some positional value-arguments (<code>&lt;wordfile&gt;</code>, <code>&lt;infile&gt;</code>) of which one is repeatable, a required flag with value-argument (<code>-dict &lt;dictionary&gt;</code>), an option with value-argument (<code>-o &lt;outfile&gt;</code>), one option with two alternatives (<code>-split</code>, <code>-nosplit</code>) and two conventional options (<code>-v</code>, <code>--progress</code>).</p>
<p>Here is the code that defines the interface, generates the man page snippet above <em>and</em> handles the parsing result: </p><div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceclipp.html">clipp</a>; <span class="keyword">using </span>std::cout; <span class="keyword">using </span>std::string;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//variables storing the parsing result; initialized with their default values</span></div>
<div class="line"><span class="keyword">enum class</span> mode {make, find, help};</div>
<div class="line">mode selected = mode::help;</div>
<div class="line">std::vector&lt;string&gt; input;</div>
<div class="line"><span class="keywordtype">string</span> dict, out;</div>
<div class="line"><span class="keywordtype">bool</span> split = <span class="keyword">false</span>, progr = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> dictionary = required(<span class="stringliteral">&quot;-dict&quot;</span>) &amp; value(<span class="stringliteral">&quot;dictionary&quot;</span>, dict);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> makeMode = (</div>
<div class="line">    command(<span class="stringliteral">&quot;make&quot;</span>).set(selected,mode::make),</div>
<div class="line">    values(<span class="stringliteral">&quot;wordfile&quot;</span>, input),</div>
<div class="line">    dictionary,</div>
<div class="line">    option(<span class="stringliteral">&quot;--progress&quot;</span>, <span class="stringliteral">&quot;-p&quot;</span>).set(progr) % <span class="stringliteral">&quot;show progress&quot;</span> );</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> findMode = (</div>
<div class="line">    command(<span class="stringliteral">&quot;find&quot;</span>).set(selected,mode::find),</div>
<div class="line">    values(<span class="stringliteral">&quot;infile&quot;</span>, input),</div>
<div class="line">    dictionary,</div>
<div class="line">    (option(<span class="stringliteral">&quot;-o&quot;</span>, <span class="stringliteral">&quot;--output&quot;</span>) &amp; value(<span class="stringliteral">&quot;outfile&quot;</span>, out)) % <span class="stringliteral">&quot;write to file instead of stdout&quot;</span>,</div>
<div class="line">    ( option(<span class="stringliteral">&quot;-split&quot;</span>  ).set(split,<span class="keyword">true</span>) |</div>
<div class="line">      option(<span class="stringliteral">&quot;-nosplit&quot;</span>).set(split,<span class="keyword">false</span>) ) % <span class="stringliteral">&quot;(do not) split output&quot;</span> );</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    (makeMode | findMode | command(<span class="stringliteral">&quot;help&quot;</span>).set(selected,mode::help) ),</div>
<div class="line">    option(<span class="stringliteral">&quot;-v&quot;</span>, <span class="stringliteral">&quot;--version&quot;</span>).call([]{cout &lt;&lt; <span class="stringliteral">&quot;version 1.0\n\n&quot;</span>;}).doc(<span class="stringliteral">&quot;show version&quot;</span>)  );</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(<a class="code hl_function" href="namespaceclipp.html#a2b4c7356890e9113b5d6e9f351428f96">parse</a>(argc, argv, cli)) {</div>
<div class="line">    <span class="keywordflow">switch</span>(selected) {</div>
<div class="line">        <span class="keywordflow">case</span> mode::make: <span class="comment">/* ... */</span> <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> mode::find: <span class="comment">/* ... */</span> <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> mode::help: cout &lt;&lt; <a class="code hl_function" href="namespaceclipp.html#a3616cbfc340cc4e9e2890609ae1a808d">make_man_page</a>(cli, <span class="stringliteral">&quot;finder&quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">     cout &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(cli, <span class="stringliteral">&quot;finder&quot;</span>) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassclipp_1_1usage__lines_html"><div class="ttname"><a href="classclipp_1_1usage__lines.html">clipp::usage_lines</a></div><div class="ttdoc">generates usage lines</div><div class="ttdef"><b>Definition</b> clipp.h:6040</div></div>
<div class="ttc" id="anamespaceclipp_html_a2b4c7356890e9113b5d6e9f351428f96"><div class="ttname"><a href="namespaceclipp.html#a2b4c7356890e9113b5d6e9f351428f96">clipp::parse</a></div><div class="ttdeci">parsing_result parse(arg_list args, const group &amp;cli)</div><div class="ttdoc">parses vector of arg strings and executes actions</div><div class="ttdef"><b>Definition</b> clipp.h:5281</div></div>
<div class="ttc" id="anamespaceclipp_html_a3616cbfc340cc4e9e2890609ae1a808d"><div class="ttname"><a href="namespaceclipp.html#a3616cbfc340cc4e9e2890609ae1a808d">clipp::make_man_page</a></div><div class="ttdeci">man_page make_man_page(const group &amp;cli, doc_string progname=&quot;&quot;, const doc_formatting &amp;fmt=doc_formatting{})</div><div class="ttdoc">generates man sections from command line parameters with sections &quot;synopsis&quot; and &quot;options&quot;</div><div class="ttdef"><b>Definition</b> clipp.h:6853</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Quick Reference</h1>
<p>Below are a few examples that should give you an idea for how clipp works. Consider this basic setup with a few variables that we want to set using command line arguments: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) { </div>
<div class="line">    <span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceclipp.html">clipp</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// define some variables</span></div>
<div class="line">    <span class="keywordtype">bool</span> a = <span class="keyword">false</span>, b = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordtype">int</span> n = 0, k = 0;</div>
<div class="line">    <span class="keywordtype">double</span> x = 0.0, y = 0.0;</div>
<div class="line">    std::vector&lt;int&gt; ids;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> cli = ( <span class="comment">/* CODE DEFINING COMMAND LINE INTERFACE GOES HERE */</span> );</div>
<div class="line"> </div>
<div class="line">    parse(argc, argv, cli);    <span class="comment">//excludes argv[0]</span></div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(cli, <span class="stringliteral">&quot;exe&quot;</span>) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Interface (<code>usage_lines</code>)   </th><th class="markdownTableHeadNone">Code (content of <code>cli</code> parentheses )    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exe [-a]</code>   </td><td class="markdownTableBodyNone"><code>option("-a", "--all").set(a)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>exe [--all]</code>   </td><td class="markdownTableBodyNone"><code>option("--all", "-a", "--ALL").set(a)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exe [-a] [-b]</code>   </td><td class="markdownTableBodyNone"><code>option("-a").set(a), option("-b").set(b)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>exe -a</code>   </td><td class="markdownTableBodyNone"><code>required("-a").set(a)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exe [-a] -b</code>   </td><td class="markdownTableBodyNone"><code>option("-a").set(a), required("-b").set(b)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>exe [-n &lt;times&gt;]</code>   </td><td class="markdownTableBodyNone"><code>option("-n", "--iter") &amp; value("times", n)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exe [-n [&lt;times&gt;]]</code>   </td><td class="markdownTableBodyNone"><code>option("-n", "--iter") &amp; opt_value("times", n)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>exe -n &lt;times&gt;</code>   </td><td class="markdownTableBodyNone"><code>required("-n", "--iter") &amp; value("times", n)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exe -n [&lt;times&gt;]</code>   </td><td class="markdownTableBodyNone"><code>required("-n", "--iter") &amp; opt_value("times", n)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>exe [-c &lt;x&gt; &lt;y&gt;]</code>   </td><td class="markdownTableBodyNone"><code>option("-c") &amp; value("x", x) &amp; value("y", y)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exe -c &lt;x&gt; &lt;y&gt;</code>   </td><td class="markdownTableBodyNone"><code>required("-c") &amp; value("x", x) &amp; value("y", y)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>exe -c &lt;x&gt; [&lt;y&gt;]</code>   </td><td class="markdownTableBodyNone"><code>required("-c") &amp; value("x", x) &amp; opt_value("y", y)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exe [-l &lt;lines&gt;...]</code>   </td><td class="markdownTableBodyNone"><code>option("-l") &amp; values("lines", ids)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>exe [-l [&lt;lines&gt;...]]</code>   </td><td class="markdownTableBodyNone"><code>option("-l") &amp; opt_values("lines", ids)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exe [-l &lt;lines&gt;]...</code>   </td><td class="markdownTableBodyNone"><code>repeatable( option("-l") &amp; value("lines", ids) )</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>exe -l &lt;lines&gt;...</code>   </td><td class="markdownTableBodyNone"><code>required("-l") &amp; values("lines", ids)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exe -l [&lt;lines&gt;...]</code>   </td><td class="markdownTableBodyNone"><code>required("-l") &amp; opt_values("lines", ids)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>exe (-l &lt;lines&gt;)...</code>   </td><td class="markdownTableBodyNone"><code>repeatable( required("-l") &amp; value("lines", ids) )</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exe fetch [-a]</code>   </td><td class="markdownTableBodyNone"><code>command("fetch").set(k,1), option("-a").set(a)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>exe init \| fetch [-a]</code>   </td><td class="markdownTableBodyNone"><code>command("init").set(k,0) \| (command("fetch").set(k,1), option("-a").set(a))</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exe [-a\|-b]</code>   </td><td class="markdownTableBodyNone"><code>option("-a").set(a) \| option("-b").set(b)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>exe [-m a\|b]</code>   </td><td class="markdownTableBodyNone"><code>option("-m") &amp; (required("a").set(a) \| required("b").set(b))</code>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md4"></a>
Overview</h1>
<p>See the examples section for detailed explanations of each topic.</p>
<p>Namespace qualifiers are omitted from all examples for better readability. All entities are defined in <code>namespace clipp</code>.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
Basic Setup</h3>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) { </div>
<div class="line">    <span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceclipp.html">clipp</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> cli = ( <span class="comment">/* CODE DEFINING COMMAND LINE INTERFACE GOES HERE */</span> );</div>
<div class="line">    parse(argc, argv, cli);    <span class="comment">//excludes argv[0]</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">//if you want to include argv[0]</span></div>
<div class="line">    <span class="comment">//parse(argv, argv+argc, cli);</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>There are two kinds of building blocks for command line interfaces: parameters and groups. Convieniently named factory functions produce parameters or groups with the desired settings applied. </p>
<h3><a class="anchor" id="autotoc_md6"></a>
Parameters (@ref "flag-strings" "flag strings", @ref "commands" "commands", @ref "required-positional-values" "positional values", @ref "required-flags" "required flags", @ref "repeatable-parameters" "repeatable parameters")</h3>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> a = <span class="keyword">false</span>, f = <span class="keyword">false</span>;</div>
<div class="line"><span class="keywordtype">string</span> s; vector&lt;string&gt; vs;</div>
<div class="line"><span class="keyword">auto</span> cli = (                             <span class="comment">// matches  required  positional  repeatable</span></div>
<div class="line">    command(<span class="stringliteral">&quot;push&quot;</span>),                     <span class="comment">// exactly      yes       yes         no</span></div>
<div class="line">    required(<span class="stringliteral">&quot;-f&quot;</span>, <span class="stringliteral">&quot;--file&quot;</span>).set(f),     <span class="comment">// exactly      yes       no          no</span></div>
<div class="line">    required(<span class="stringliteral">&quot;-a&quot;</span>, <span class="stringliteral">&quot;--all&quot;</span>, <span class="stringliteral">&quot;-A&quot;</span>).set(a),  <span class="comment">// exactly      no        no          no</span></div>
<div class="line">                                                  </div>
<div class="line">    value(<span class="stringliteral">&quot;file&quot;</span>, s),                    <span class="comment">// any arg      yes       yes         no</span></div>
<div class="line">    values(<span class="stringliteral">&quot;file&quot;</span>, vs),                  <span class="comment">// any arg      yes       yes         yes</span></div>
<div class="line">    opt_value(<span class="stringliteral">&quot;file&quot;</span>, s),                <span class="comment">// any arg      no        yes         no</span></div>
<div class="line">    opt_values(<span class="stringliteral">&quot;file&quot;</span>, vs),              <span class="comment">// any arg      no        yes         yes</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">//&quot;catch all&quot; parameter - useful for error handling</span></div>
<div class="line">    any_other(vs),                       <span class="comment">// any arg      no        no          yes</span></div>
<div class="line">    <span class="comment">//catches arguments that fulfill a predicate and aren&#39;t matched by other parameters</span></div>
<div class="line">    any(predicate, vs)                   <span class="comment">// predicate    no        no          yes</span></div>
<div class="line">);</div>
</div><!-- fragment --><p> The functions above are convenience factories: </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> f = <span class="keyword">true</span>; <span class="keywordtype">string</span> s;</div>
<div class="line"><span class="keyword">auto</span> v1 = values(<span class="stringliteral">&quot;file&quot;</span>, s);</div>
<div class="line"><span class="comment">// is equivalent to:</span></div>
<div class="line"><span class="keyword">auto</span> v2 = <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{match::nonempty}.<a class="code hl_function" href="classclipp_1_1parameter.html#a1797e20c969e1af04136adeb67c034f9">label</a>(<span class="stringliteral">&quot;file&quot;</span>).blocking(<span class="keyword">true</span>).repeatable(<span class="keyword">true</span>).set(s);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> r1 = required(<span class="stringliteral">&quot;-f&quot;</span>, <span class="stringliteral">&quot;--file&quot;</span>).set(f);</div>
<div class="line"><span class="comment">// is equivalent to:</span></div>
<div class="line"><span class="keyword">auto</span> r2 = <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{<span class="stringliteral">&quot;-f&quot;</span>, <span class="stringliteral">&quot;--file&quot;</span>}.<a class="code hl_function" href="classclipp_1_1parameter.html#ab80dc22eea997a29536884baed01ec60">required</a>(<span class="keyword">true</span>).set(f);</div>
<div class="ttc" id="aclassclipp_1_1parameter_html"><div class="ttname"><a href="classclipp_1_1parameter.html">clipp::parameter</a></div><div class="ttdoc">command line parameter that can match one or many arguments.</div><div class="ttdef"><b>Definition</b> clipp.h:1885</div></div>
<div class="ttc" id="aclassclipp_1_1parameter_html_a1797e20c969e1af04136adeb67c034f9"><div class="ttname"><a href="classclipp_1_1parameter.html#a1797e20c969e1af04136adeb67c034f9">clipp::parameter::label</a></div><div class="ttdeci">const doc_string &amp; label() const</div><div class="ttdoc">returns parameter label; will be used for documentation, if flags are empty</div><div class="ttdef"><b>Definition</b> clipp.h:1987</div></div>
<div class="ttc" id="aclassclipp_1_1parameter_html_ab80dc22eea997a29536884baed01ec60"><div class="ttname"><a href="classclipp_1_1parameter.html#ab80dc22eea997a29536884baed01ec60">clipp::parameter::required</a></div><div class="ttdeci">bool required() const noexcept</div><div class="ttdoc">returns if a parameter is required</div><div class="ttdef"><b>Definition</b> clipp.h:1955</div></div>
</div><!-- fragment --><ul>
<li>a required parameter has to match at least one command line argument</li>
<li>a repeatable parameter can match any number of arguments</li>
<li>non-positional (=non-blocking) parameters can match arguments in any order</li>
<li>a positional (blocking) parameter defines a "stop point", i.e., until it matches all parameters following it are not allowed to match; once it matched, all parameters preceding it (wihtin the current group) will become unreachable</li>
</ul>
<h4><a class="anchor" id="autotoc_md7"></a>
@ref "options-with-values" "Flags + Values"</h4>
<p>If you want parameters to be matched in sequence, you can tie them together using either <code>operator &amp;</code> or the grouping function <code>in_sequence</code>:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> n = 1; <span class="keywordtype">string</span> s; vector&lt;int&gt; ls;</div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    <span class="comment">//option with required value</span></div>
<div class="line">    option(<span class="stringliteral">&quot;-n&quot;</span>, <span class="stringliteral">&quot;--repeat&quot;</span>) &amp; value(<span class="stringliteral">&quot;times&quot;</span>, n),</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//required flag with optional value</span></div>
<div class="line">    required(<span class="stringliteral">&quot;--file&quot;</span>) &amp; opt_value(<span class="stringliteral">&quot;name&quot;</span>, s),</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//option with exactly two values</span></div>
<div class="line">    option(<span class="stringliteral">&quot;-p&quot;</span>, <span class="stringliteral">&quot;--pos&quot;</span>) &amp; value(<span class="stringliteral">&quot;x&quot;</span>) &amp; value(<span class="stringliteral">&quot;y&quot;</span>),</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//same as before                   v            v</span></div>
<div class="line">    in_sequence( option(<span class="stringliteral">&quot;-p&quot;</span>, <span class="stringliteral">&quot;--pos&quot;</span>) , value(<span class="stringliteral">&quot;x&quot;</span>) , value(<span class="stringliteral">&quot;y&quot;</span>) ),</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//option with at least one value (and optionally more)</span></div>
<div class="line">    option(<span class="stringliteral">&quot;-l&quot;</span>) &amp; values(<span class="stringliteral">&quot;lines&quot;</span>, ls)</div>
<div class="line">);</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md8"></a>
@ref "value-filters" "Filtering Value Parameters"</h4>
<p>Value parameters use a filter function to test if they are allowed to match an argument string. The default filter <code>match::nonempty</code> that is used by <code>value</code>, <code>values</code>, <code>opt_value</code> and <code>opt_values</code> will match any non-empty argument string. You can either supply other filter functions/function objects as first argument of <code>value</code>, <code>values</code>, etc. or use one of these built-in shorthand factory functions covering the most common cases: </p><div class="fragment"><div class="line"><span class="keywordtype">string</span> name; <span class="keywordtype">double</span> r = 0.0; <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    value(<span class="stringliteral">&quot;user&quot;</span>, name),   <span class="comment">// matches any non-empty string</span></div>
<div class="line">    word(<span class="stringliteral">&quot;user&quot;</span>, name),    <span class="comment">// matches any non-empty alphanumeric string</span></div>
<div class="line">    number(<span class="stringliteral">&quot;ratio&quot;</span>, r),    <span class="comment">// matches string representations of numbers</span></div>
<div class="line">    integer(<span class="stringliteral">&quot;times&quot;</span>, n)    <span class="comment">// matches string representations of integers</span></div>
<div class="line">);</div>
</div><!-- fragment --><p> Analogous to <code>value</code>, <code>opt_value</code>, etc. there are also functions for <code>words</code>, <code>opt_word</code>, etc.</p>
<h4><a class="anchor" id="autotoc_md9"></a>
Value Parameters With @ref "custom-value-filters" "Custom Filters"</h4>
<div class="fragment"><div class="line"><span class="keyword">auto</span> is_char = [](<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg) { <span class="keywordflow">return</span> arg.size() == 1 &amp;&amp; std::isalpha(arg[0]); };</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">char</span> c = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line">                             <span class="comment">// matches       required  positional  repeatable</span></div>
<div class="line">value(is_char, <span class="stringliteral">&quot;c&quot;</span>, c);      <span class="comment">// one character  yes       yes         no</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md10"></a>
Groups</h3>
<ul>
<li>group mutually compatible parameters with parentheses and commas: <div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( option(<span class="stringliteral">&quot;-a&quot;</span>), option(<span class="stringliteral">&quot;-b&quot;</span>), option(<span class="stringliteral">&quot;-c&quot;</span>) );</div>
</div><!-- fragment --></li>
<li>group mutually exclusive parameters as alternatives using <code>operator |</code> or <code>one_of</code>: <div class="fragment"><div class="line"><span class="keyword">auto</span> cli1 = ( value(<span class="stringliteral">&quot;input_file&quot;</span>) | command(<span class="stringliteral">&quot;list&quot;</span>) | command(<span class="stringliteral">&quot;flush&quot;</span>) );</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli2 = one_of( value(<span class="stringliteral">&quot;input_file&quot;</span>) , command(<span class="stringliteral">&quot;list&quot;</span>) , command(<span class="stringliteral">&quot;flush&quot;</span>) );</div>
</div><!-- fragment --></li>
<li>group parameters so that they must be matched in sequence using <code>operator &amp;</code> or <code>in_sequence</code>: <div class="fragment"><div class="line"><span class="keywordtype">double</span> x = 0, y = 0, z = 0;</div>
<div class="line"><span class="keyword">auto</span> cli1 = ( option(<span class="stringliteral">&quot;-pos&quot;</span>) &amp; value(<span class="stringliteral">&quot;X&quot;</span>,x) &amp; value(<span class="stringliteral">&quot;Y&quot;</span>,y) &amp; value(<span class="stringliteral">&quot;Z&quot;</span>,z) );</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli2 = in_sequence( option(<span class="stringliteral">&quot;-pos&quot;</span>) , value(<span class="stringliteral">&quot;X&quot;</span>,x) , value(<span class="stringliteral">&quot;Y&quot;</span>,y) , value(<span class="stringliteral">&quot;Z&quot;</span>,z) );</div>
</div><!-- fragment --> Note that surrounding groups are not affected by this, so that <code>-a</code> and <code>-b</code> can be matched in any order while <code>-b</code> and the value <code>X</code> must match in sequence: <div class="fragment"><div class="line"><span class="keywordtype">bool</span> a = <span class="keyword">false</span>, b = <span class="keyword">false</span>; <span class="keywordtype">int</span> x = 0;</div>
<div class="line"><span class="keyword">auto</span> cli = (  option(<span class="stringliteral">&quot;-a&quot;</span>).set(a),  option(<span class="stringliteral">&quot;-b&quot;</span>).set(b) &amp; value(<span class="stringliteral">&quot;X&quot;</span>,x)  );</div>
</div><!-- fragment --></li>
<li>groups can be nested and combined to form arbitrarily complex interfaces (see here and here): <div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( command(<span class="stringliteral">&quot;push&quot;</span>) | ( command(<span class="stringliteral">&quot;pull&quot;</span>), option(<span class="stringliteral">&quot;-f&quot;</span>, <span class="stringliteral">&quot;--force&quot;</span>) )  );</div>
</div><!-- fragment --></li>
<li>groups can be repeatable as well: <div class="fragment"><div class="line"><span class="keyword">auto</span> cli1 = repeatable( command(<span class="stringliteral">&quot;flip&quot;</span>) | command(<span class="stringliteral">&quot;flop&quot;</span>) );</div>
</div><!-- fragment --></li>
<li>force common prefixes on a group of flags: <div class="fragment"><div class="line"><span class="keywordtype">int</span> x = 0;</div>
<div class="line"><span class="keyword">auto</span> cli1 = with_prefix(<span class="stringliteral">&quot;-&quot;</span>, option(<span class="stringliteral">&quot;a&quot;</span>), option(<span class="stringliteral">&quot;b&quot;</span>) &amp; value(<span class="stringliteral">&quot;x&quot;</span>,x), ... );</div>
<div class="line">                          <span class="comment">// =&gt;     -a           -b     ^unaffected^</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli2 = with_prefix_short_long(<span class="stringliteral">&quot;-&quot;</span>, <span class="stringliteral">&quot;--&quot;</span>, option(<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;all&quot;</span>), option(<span class="stringliteral">&quot;b&quot;</span>), ... );</div>
<div class="line">                                               <span class="comment">// =&gt; -a  --all           -b</span></div>
</div><!-- fragment --></li>
<li>force common suffixes on a group of flags: <div class="fragment"><div class="line"><span class="keywordtype">int</span> x = 0;</div>
<div class="line"><span class="keyword">auto</span> cli1 = with_suffix(<span class="stringliteral">&quot;=&quot;</span>, option(<span class="stringliteral">&quot;a&quot;</span>) &amp; value(<span class="stringliteral">&quot;x&quot;</span>,x), ... );</div>
<div class="line">                          <span class="comment">// =&gt;      a=    ^unaffected^</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli2 = with_suffix_short_long(<span class="stringliteral">&quot;:&quot;</span>, <span class="stringliteral">&quot;:=&quot;</span>, option(<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;all&quot;</span>), option(<span class="stringliteral">&quot;b&quot;</span>), ... );</div>
<div class="line">                                               <span class="comment">// =&gt;  a:   all:=          b:</span></div>
</div><!-- fragment --></li>
<li>make a group of flags joinable: <div class="fragment"><div class="line"><span class="keyword">auto</span> cli1 = joinable( option(<span class="stringliteral">&quot;-a&quot;</span>), option(<span class="stringliteral">&quot;-b&quot;</span>));  <span class="comment">//will match &quot;-a&quot;, &quot;-b&quot;, &quot;-ab&quot;, &quot;-ba&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//works also with arbitrary common prefixes:</span></div>
<div class="line"><span class="keyword">auto</span> cli2 = joinable( option(<span class="stringliteral">&quot;--xA0&quot;</span>), option(<span class="stringliteral">&quot;--xB1&quot;</span>));  <span class="comment">//will also match &quot;--xA0B1&quot; or &quot;--xB1A0&quot;</span></div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="autotoc_md11"></a>
Interfacing With Your Code</h3>
<p>The easiest way to connect the command line interface to the rest of your code is to bind object values or function (object) calls to parameters (see also here): <br  />
 </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> b = <span class="keyword">false</span>; <span class="keywordtype">int</span> i = 5; <span class="keywordtype">int</span> m = 0; <span class="keywordtype">string</span> x; ifstream fs;</div>
<div class="line"><span class="keyword">auto</span> cli = ( </div>
<div class="line">    option(<span class="stringliteral">&quot;-b&quot;</span>).set(b),                      <span class="comment">// &quot;-b&quot; detected -&gt; set b to true</span></div>
<div class="line">    option(<span class="stringliteral">&quot;-m&quot;</span>).set(m,2),                    <span class="comment">// &quot;-m&quot; detected -&gt; set m to 2</span></div>
<div class="line">    option(<span class="stringliteral">&quot;-x&quot;</span>) &amp; value(<span class="stringliteral">&quot;X&quot;</span>, x),             <span class="comment">// set x&#39;s value from arg string </span></div>
<div class="line">    option(<span class="stringliteral">&quot;-i&quot;</span>) &amp; opt_value(<span class="stringliteral">&quot;i&quot;</span>, i),         <span class="comment">// set i&#39;s value from arg string  </span></div>
<div class="line">    option(<span class="stringliteral">&quot;-v&quot;</span>).call( []{ cout &lt;&lt; <span class="stringliteral">&quot;v&quot;</span>; } ),  <span class="comment">// call function (object) / lambda</span></div>
<div class="line">    option(<span class="stringliteral">&quot;-v&quot;</span>)( []{ cout &lt;&lt; <span class="stringliteral">&quot;v&quot;</span>; } ),       <span class="comment">// same as previous line</span></div>
<div class="line">    <a class="code hl_function" href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">option</a>(<span class="stringliteral">&quot;-f&quot;</span>) &amp; <a class="code hl_function" href="namespaceclipp.html#a3cecc1b8e2ded82a4e6aff98d1f308a7">value</a>(<span class="stringliteral">&quot;file&quot;</span>).call([&amp;](<span class="keywordtype">string</span> f){ fs.open(f); })</div>
<div class="line">);</div>
<div class="ttc" id="anamespaceclipp_html_a3cecc1b8e2ded82a4e6aff98d1f308a7"><div class="ttname"><a href="namespaceclipp.html#a3cecc1b8e2ded82a4e6aff98d1f308a7">clipp::value</a></div><div class="ttdeci">parameter value(const doc_string &amp;label, Targets &amp;&amp;... tgts)</div><div class="ttdoc">makes required, blocking, repeatable value parameter; matches any non-empty string</div><div class="ttdef"><b>Definition</b> clipp.h:2207</div></div>
<div class="ttc" id="anamespaceclipp_html_a49eecb5d433ae8b2a2af78ddc7464618"><div class="ttname"><a href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">clipp::option</a></div><div class="ttdeci">parameter option(String &amp;&amp;flag, Strings &amp;&amp;... flags)</div><div class="ttdoc">makes optional, non-blocking exact match parameter</div><div class="ttdef"><b>Definition</b> clipp.h:2191</div></div>
</div><!-- fragment --><p>In production code one would probably use a settings class: </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structsettings.html">settings</a> { <span class="keywordtype">bool</span> x = <span class="keyword">false</span>; <span class="comment">/* ... */</span> };</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="structsettings.html">settings</a> cmdline_settings(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) {</div>
<div class="line">    <a class="code hl_struct" href="structsettings.html">settings</a> s;</div>
<div class="line">    <span class="keyword">auto</span> cli = ( option(<span class="stringliteral">&quot;-x&quot;</span>).set(s.x), <span class="comment">/* ... */</span> );</div>
<div class="line">    parse(argc, argv, cli);</div>
<div class="line">    <span class="keywordflow">return</span> s;</div>
<div class="line">}</div>
<div class="ttc" id="astructsettings_html"><div class="ttname"><a href="structsettings.html">settings</a></div><div class="ttdef"><b>Definition</b> model.cpp:24</div></div>
</div><!-- fragment --><p> Note that the target must either be:</p><ul>
<li>a fundamental type (<code>int, long int, float, double, ...</code>)</li>
<li>a type that is convertible from <code>const char*</code></li>
<li>a callable entity: function, function object / lambda that either has an empty parameter list or exactly one parameter that is convertible from <code>const char*</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md12"></a>
Generating Documentation (@ref "documentation-generation" "see also here")</h3>
<p>Docstrings for groups and for parameters can either be set with the member function <code>doc</code> or with <code>operator %</code>: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    (   option(<span class="stringliteral">&quot;x&quot;</span>).set(x).doc(<span class="stringliteral">&quot;sets X&quot;</span>),</div>
<div class="line">        option(<span class="stringliteral">&quot;y&quot;</span>).set(y) % <span class="stringliteral">&quot;sets Y&quot;</span>         </div>
<div class="line">    ),</div>
<div class="line">    <span class="stringliteral">&quot;documented group 1:&quot;</span> % (  </div>
<div class="line">        option(<span class="stringliteral">&quot;-g&quot;</span>).set(g).doc(<span class="stringliteral">&quot;activates G&quot;</span>),   </div>
<div class="line">        option(<span class="stringliteral">&quot;-h&quot;</span>).set(h) % <span class="stringliteral">&quot;activates H&quot;</span>   </div>
<div class="line">    ),</div>
<div class="line">    (   option(<span class="stringliteral">&quot;-i&quot;</span>).set(i) % <span class="stringliteral">&quot;activates I&quot;</span>,   </div>
<div class="line">        option(<span class="stringliteral">&quot;-j&quot;</span>).set(j) % <span class="stringliteral">&quot;activates J&quot;</span> </div>
<div class="line">    ).doc(<span class="stringliteral">&quot;documented group 2:&quot;</span>)</div>
<div class="line">);</div>
</div><!-- fragment --><p>Usage Lines: </p><div class="fragment"><div class="line">cout &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(cli, <span class="stringliteral">&quot;progname&quot;</span>) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//with formatting options</span></div>
<div class="line"><span class="keyword">auto</span> fmt = <a class="code hl_class" href="classclipp_1_1doc__formatting.html">doc_formatting</a>{}</div>
<div class="line">           .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#aa7ff8e31d26e5b82b4f7026bc6032573">first_column</a>(3)</div>
<div class="line">           .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a077bdec1a9c3bfd9c2a1cbe09aa17be4">last_column</a>(79);</div>
<div class="line">cout &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(cli, <span class="stringliteral">&quot;progname&quot;</span>, fmt) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html"><div class="ttname"><a href="classclipp_1_1doc__formatting.html">clipp::doc_formatting</a></div><div class="ttdoc">documentation formatting options</div><div class="ttdef"><b>Definition</b> clipp.h:5408</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a077bdec1a9c3bfd9c2a1cbe09aa17be4"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a077bdec1a9c3bfd9c2a1cbe09aa17be4">clipp::doc_formatting::last_column</a></div><div class="ttdeci">doc_formatting &amp; last_column(int col)</div><div class="ttdoc">determines column that no documentation text must exceed; (text should be wrapped appropriately after...</div><div class="ttdef"><b>Definition</b> clipp.h:5454</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_aa7ff8e31d26e5b82b4f7026bc6032573"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#aa7ff8e31d26e5b82b4f7026bc6032573">clipp::doc_formatting::first_column</a></div><div class="ttdeci">doc_formatting &amp; first_column(int col)</div><div class="ttdoc">determines column where documentation printing starts</div><div class="ttdef"><b>Definition</b> clipp.h:5424</div></div>
</div><!-- fragment --><p>Detailed Documentation: </p><div class="fragment"><div class="line">cout &lt;&lt; <a class="code hl_class" href="classclipp_1_1documentation.html">documentation</a>(cli) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//with formatting options</span></div>
<div class="line"><span class="keyword">auto</span> fmt = <a class="code hl_class" href="classclipp_1_1doc__formatting.html">doc_formatting</a>{}</div>
<div class="line">           .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#aa7ff8e31d26e5b82b4f7026bc6032573">first_column</a>(7)</div>
<div class="line">           .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a2d3b049f0590bc3376fc471034a310b2">doc_column</a>(15)</div>
<div class="line">           .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a077bdec1a9c3bfd9c2a1cbe09aa17be4">last_column</a>(99);</div>
<div class="line">cout &lt;&lt; <a class="code hl_class" href="classclipp_1_1documentation.html">documentation</a>(cli, fmt) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a2d3b049f0590bc3376fc471034a310b2"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a2d3b049f0590bc3376fc471034a310b2">clipp::doc_formatting::doc_column</a></div><div class="ttdeci">doc_formatting &amp; doc_column(int col)</div><div class="ttdoc">determines column where docstrings start</div><div class="ttdef"><b>Definition</b> clipp.h:5438</div></div>
<div class="ttc" id="aclassclipp_1_1documentation_html"><div class="ttname"><a href="classclipp_1_1documentation.html">clipp::documentation</a></div><div class="ttdoc">generates parameter and group documentation from docstrings</div><div class="ttdef"><b>Definition</b> clipp.h:6519</div></div>
</div><!-- fragment --><p>Man Pages: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( <span class="comment">/*CODE DEFINING COMMAND LINE INTERFACE GOES HERE*/</span> );</div>
<div class="line">cout &lt;&lt; make_man_page(cli, <span class="stringliteral">&quot;progname&quot;</span>) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//with formatting options</span></div>
<div class="line"><span class="keyword">auto</span> fmt = <a class="code hl_class" href="classclipp_1_1doc__formatting.html">doc_formatting</a>{}</div>
<div class="line">           .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#aa7ff8e31d26e5b82b4f7026bc6032573">first_column</a>(7)</div>
<div class="line">           .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a2d3b049f0590bc3376fc471034a310b2">doc_column</a>(15)</div>
<div class="line">           .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a077bdec1a9c3bfd9c2a1cbe09aa17be4">last_column</a>(99);</div>
<div class="line">cout &lt;&lt; make_man_page(cli, <span class="stringliteral">&quot;progname&quot;</span>, fmt) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>; </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md13"></a>
(Error) Event Handlers (@ref "error-handling" "see here", @ref "per-parameter-parsing-report" "and here")</h3>
<p>Each parameter can have event handler functions attached to it. These are invoked once for each argument that is mapped to the parameter (or once per missing event): </p><div class="fragment"><div class="line"><span class="keywordtype">string</span> file = <span class="stringliteral">&quot;default.txt&quot;</span>;</div>
<div class="line"><span class="keyword">auto</span> param = required(<span class="stringliteral">&quot;-nof&quot;</span>).set(file,<span class="stringliteral">&quot;&quot;</span>) | </div>
<div class="line">             required(<span class="stringliteral">&quot;-f&quot;</span>) &amp; value(<span class="stringliteral">&quot;file&quot;</span>, file) </div>
<div class="line">                              <span class="comment">// on 2nd, 3rd, 4th,... match (would be an error in this case)</span></div>
<div class="line">                              .if_repeated( [] { <span class="comment">/* ... */</span> } )    </div>
<div class="line">                              <span class="comment">// if required value-param was missing</span></div>
<div class="line">                              .if_missing( [] { <span class="comment">/* ... */</span> } )    </div>
<div class="line">                              <span class="comment">// if unreachable, e.g. no flag &quot;-f&quot; before filename</span></div>
<div class="line">                              .if_blocked( [] { <span class="comment">/* ... */</span> } )    </div>
<div class="line">                              <span class="comment">// if match is in conflict with other alternative &quot;-nof&quot;</span></div>
<div class="line">                              .if_conflicted( [] { <span class="comment">/* ... */</span> } );   </div>
</div><!-- fragment --><p> The handler functions can also take an int, which is set to the argument index at which the event occurred first: </p><div class="fragment"><div class="line"><span class="keywordtype">string</span> file = <span class="stringliteral">&quot;default.txt&quot;</span>;</div>
<div class="line"><span class="keyword">auto</span> param = required(<span class="stringliteral">&quot;-nof&quot;</span>).set(file,<span class="stringliteral">&quot;&quot;</span>) | </div>
<div class="line">             required(<span class="stringliteral">&quot;-f&quot;</span>) &amp; value(<span class="stringliteral">&quot;file&quot;</span>, file) </div>
<div class="line">                              .if_repeated  ( [] (<span class="keywordtype">int</span> argIdx) { <span class="comment">/* ... */</span> } )</div>
<div class="line">                              .if_missing   ( [] (<span class="keywordtype">int</span> argIdx) { <span class="comment">/* ... */</span> } )</div>
<div class="line">                              .if_blocked   ( [] (<span class="keywordtype">int</span> argIdx) { <span class="comment">/* ... */</span> } )</div>
<div class="line">                              .if_conflicted( [] (<span class="keywordtype">int</span> argIdx) { <span class="comment">/* ... */</span> } );</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md14"></a>
Special Cases</h3>
<p>If we give <code>-f -b</code> or <code>-b -f -a</code> as command line arguments for the following CLI, an error will be reported, since the value after <code>-f</code> is not optional: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (  option(<span class="stringliteral">&quot;-a&quot;</span>),  option(<span class="stringliteral">&quot;-f&quot;</span>) &amp; value(<span class="stringliteral">&quot;filename&quot;</span>),  option(<span class="stringliteral">&quot;-b&quot;</span>)  );</div>
</div><!-- fragment --><p> This behavior is fine for most use cases. But what if we want our program to take any string as a filename, because our filenames might also collide with flag names? We can make the value parameter greedy with <code>operator !</code>. This way, the next string after <code>-f</code> will always be matched with highest priority as soon as <code>-f</code> was given: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (  option(<span class="stringliteral">&quot;-a&quot;</span>),  option(<span class="stringliteral">&quot;-f&quot;</span>) &amp; !value(<span class="stringliteral">&quot;filename&quot;</span>),   option(<span class="stringliteral">&quot;-b&quot;</span>)  );</div>
<div class="line">                                        <span class="comment">//  ^~~~~~ </span></div>
</div><!-- fragment --><p> Be <b>very careful</b> with greedy parameters!</p>
<h3><a class="anchor" id="autotoc_md15"></a>
Parsing Result Analysis</h3>
<div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( <span class="comment">/* your interface here */</span> );</div>
<div class="line"><span class="keyword">auto</span> res = parse(argc, argv, cli);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(res.any_error()) { <span class="comment">/* ... */</span> }</div>
<div class="line"> </div>
<div class="line"><span class="comment">//aggregated errors</span></div>
<div class="line"><span class="keywordflow">if</span>(res.unmapped_args_count()) { <span class="comment">/* ... */</span> }</div>
<div class="line"><span class="keywordflow">if</span>(res.any_bad_repeat()) { <span class="comment">/* ... */</span> }</div>
<div class="line"><span class="keywordflow">if</span>(res.any_blocked())    { <span class="comment">/* ... */</span> }</div>
<div class="line"><span class="keywordflow">if</span>(res.any_conflict())   { <span class="comment">/* ... */</span> }</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; m : res.missing()) { </div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;missing &quot;</span> &lt;&lt; m.param() &lt;&lt; <span class="stringliteral">&quot; after index &quot;</span> &lt;&lt; m.after_index() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//per-argument mapping</span></div>
<div class="line"><span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; m : res) {</div>
<div class="line">    cout &lt;&lt; m.index() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; m.arg() &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; m.param();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot; repeat #&quot;</span> &lt;&lt; m.repeat();</div>
<div class="line">    <span class="keywordflow">if</span>(m.blocked()) cout &lt;&lt; <span class="stringliteral">&quot; blocked&quot;</span>;</div>
<div class="line">    <span class="keywordflow">if</span>(m.conflict()) cout &lt;&lt; <span class="stringliteral">&quot; conflict&quot;</span>;</div>
<div class="line">    cout &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md16"></a>
Writing Your Own Convenience Factories</h3>
<p>Sometimes it can make your CLI code more expressive and increase maintainability, if you create your own factory functions for making parameters: </p><div class="fragment"><div class="line"><span class="comment">//value that can only connect to one object with automatic default value documentation</span></div>
<div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> Target&gt;</div>
<div class="line"><a class="code hl_class" href="classclipp_1_1parameter.html">clipp::parameter</a></div>
<div class="line">documented_value(<span class="keyword">const</span> std::string&amp; name, Target&amp; tgt, <span class="keyword">const</span> std::string&amp; docstr) {</div>
<div class="line">    <span class="keyword">using </span>std::to_string;</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_function" href="namespaceclipp.html#a3cecc1b8e2ded82a4e6aff98d1f308a7">clipp::value</a>(name,tgt).doc(docstr + <span class="stringliteral">&quot;(default: &quot;</span> + to_string(tgt) + <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="comment">//value that only matches strings without prefix &#39;-&#39;</span></div>
<div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class </span>Target, <span class="keyword">class</span>... Targets&gt;</div>
<div class="line"><a class="code hl_class" href="classclipp_1_1parameter.html">clipp::parameter</a></div>
<div class="line">nodash_value(std::string label, Target&amp;&amp; tgt, Targets&amp;&amp;... tgts) {</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_function" href="namespaceclipp.html#a3cecc1b8e2ded82a4e6aff98d1f308a7">clipp::value</a>(clipp::match::prefix_not{<span class="stringliteral">&quot;-&quot;</span>}, std::move(label), </div>
<div class="line">               std::forward&lt;Target&gt;(tgt), std::forward&lt;Targets&gt;(tgts)...);</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md17"></a>
Examples</h1>
<p>Note that namespace qualifiers are omitted from all examples for better readability. The repository folder "examples" contains code for most of the following examples.</p>
<ul>
<li>options</li>
<li>coding styles</li>
<li>flag strings</li>
<li>groups</li>
<li>positional values</li>
<li>options with values</li>
<li>options with multiple values</li>
<li>required flags</li>
<li>repeatable parameters</li>
<li>actions</li>
<li>joinable flags</li>
<li>alternatives</li>
<li>commands</li>
<li>nested alternatives</li>
<li>complex nestings</li>
<li>example from docopt</li>
<li>value filters</li>
<li>greedy parameters</li>
<li>generalized joinable parameters</li>
<li>custom value filters</li>
<li>sanity checks</li>
<li>basic error handling</li>
<li>parsing</li>
<li>documentation generation</li>
<li>documentation filtering</li>
</ul>
<h2><a class="anchor" id="autotoc_md18"></a>
Options</h2>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">       switch [-a] [-b] [-c] [--hi]</div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">       -a          activates a</div>
<div class="line">       -b          activates b</div>
<div class="line">       -c, --noc   deactivates c</div>
<div class="line">       --hi        says hi</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">bool</span> a = <span class="keyword">false</span>, b = <span class="keyword">false</span>, c = <span class="keyword">true</span>; <span class="comment">//target variables</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = ( </div>
<div class="line">    option(<span class="stringliteral">&quot;-a&quot;</span>).set(a)                  % <span class="stringliteral">&quot;activates a&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;-b&quot;</span>).set(b)                  % <span class="stringliteral">&quot;activates b&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;-c&quot;</span>, <span class="stringliteral">&quot;--noc&quot;</span>).set(c,<span class="keyword">false</span>)   % <span class="stringliteral">&quot;deactivates c&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;--hi&quot;</span>)([]{cout &lt;&lt; <span class="stringliteral">&quot;hi!\n&quot;</span>;}) % <span class="stringliteral">&quot;says hi&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(parse(argc, argv, cli)) </div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;a=&quot;</span> &lt;&lt; a &lt;&lt; <span class="stringliteral">&quot;\nb=&quot;</span> &lt;&lt; b &lt;&lt; <span class="stringliteral">&quot;\nc=&quot;</span> &lt;&lt; c &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><span class="keywordflow">else</span> </div>
<div class="line">    cout &lt;&lt; make_man_page(cli, <span class="stringliteral">&quot;switch&quot;</span>);</div>
</div><!-- fragment --><p> This will set <code>a</code> to true, if <code>-a</code> is found, <code>b</code> to true, if <code>-b</code> is found, <code>c</code> to false, if <code>-c</code> or <code>--noc</code> are found and prints "hi" if <code>--hi</code> is found in <code>argv</code>. In case of parsing errors a man page will be printed.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
Coding Styles</h2>
<p>If you like it more verbose use <code>set</code> to set variables, <code>call</code> to call functions and <code>doc</code> for docstrings. The sequence of member function calls doesn't matter. </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( </div>
<div class="line">    option(<span class="stringliteral">&quot;-b&quot;</span>).set(b).doc(<span class="stringliteral">&quot;activates b&quot;</span>),</div>
<div class="line">    option(<span class="stringliteral">&quot;-c&quot;</span>, <span class="stringliteral">&quot;--noc&quot;</span>).set(c,<span class="keyword">false</span>).doc(<span class="stringliteral">&quot;deactivates c&quot;</span>),</div>
<div class="line">    option(<span class="stringliteral">&quot;--hi&quot;</span>).call([]{cout &lt;&lt; <span class="stringliteral">&quot;hi!\n&quot;</span>;}).doc(<span class="stringliteral">&quot;says hi&quot;</span>) );</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md20"></a>
You can also use &lt;tt&gt;operator &gt;&gt;&lt;/tt&gt; and &lt;tt&gt;operator &lt;&lt;&lt;/tt&gt; to define actions</h3>
<div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( </div>
<div class="line">    option(<span class="stringliteral">&quot;-b&quot;</span>)          % <span class="stringliteral">&quot;activates b&quot;</span>   &gt;&gt; b,             </div>
<div class="line">    option(<span class="stringliteral">&quot;-c&quot;</span>, <span class="stringliteral">&quot;--noc&quot;</span>) % <span class="stringliteral">&quot;deactivates c&quot;</span> &gt;&gt; set(c,<span class="keyword">false</span>),</div>
<div class="line">    option(<span class="stringliteral">&quot;--hi&quot;</span>)        % <span class="stringliteral">&quot;says hi&quot;</span>       &gt;&gt; []{cout &lt;&lt; <span class="stringliteral">&quot;hi!\n&quot;</span>;} );</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( </div>
<div class="line">    option(<span class="stringliteral">&quot;-b&quot;</span>)          % <span class="stringliteral">&quot;activates b&quot;</span>   &gt;&gt; b,             </div>
<div class="line">    option(<span class="stringliteral">&quot;-c&quot;</span>, <span class="stringliteral">&quot;--noc&quot;</span>) % <span class="stringliteral">&quot;deactivates c&quot;</span> &gt;&gt; set(c,<span class="keyword">false</span>),</div>
<div class="line">    option(<span class="stringliteral">&quot;--hi&quot;</span>)        % <span class="stringliteral">&quot;says hi&quot;</span>       &gt;&gt; []{cout &lt;&lt; <span class="stringliteral">&quot;hi!\n&quot;</span>;} );</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( </div>
<div class="line">    b                    &lt;&lt; option(<span class="stringliteral">&quot;-b&quot;</span>)          % <span class="stringliteral">&quot;activates b&quot;</span>,</div>
<div class="line">    set(c,<span class="keyword">false</span>)         &lt;&lt; option(<span class="stringliteral">&quot;-c&quot;</span>, <span class="stringliteral">&quot;--noc&quot;</span>) % <span class="stringliteral">&quot;deactivates c&quot;</span>,</div>
<div class="line">    []{cout &lt;&lt; <span class="stringliteral">&quot;hi!\n&quot;</span>;} &lt;&lt; option(<span class="stringliteral">&quot;--hi&quot;</span>)        % <span class="stringliteral">&quot;says hi&quot;</span> );</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( </div>
<div class="line">    <span class="stringliteral">&quot;activates b&quot;</span>   % option(<span class="stringliteral">&quot;-b&quot;</span>)          &gt;&gt; b,</div>
<div class="line">    <span class="stringliteral">&quot;deactivates c&quot;</span> % option(<span class="stringliteral">&quot;-c&quot;</span>, <span class="stringliteral">&quot;--noc&quot;</span>) &gt;&gt; set(c,<span class="keyword">false</span>),</div>
<div class="line">    <span class="stringliteral">&quot;says hi&quot;</span>       % option(<span class="stringliteral">&quot;--hi&quot;</span>)        &gt;&gt; []{cout &lt;&lt; <span class="stringliteral">&quot;hi!\n&quot;</span>;} );</div>
</div><!-- fragment --><p> Note that <code>%</code> has a higher precedence than <code>&lt;&lt;</code> and <code>&gt;&gt;</code> which means that you either have to keep the docstrings closer to the command line parameters than the actions or use parentheses.</p>
<p>You should also have a look at actions for more details.</p>
<h3><a class="anchor" id="autotoc_md21"></a>
Step-by-step configuration of parameters:</h3>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> n = 1;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> optN = <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{<span class="stringliteral">&quot;-n&quot;</span>, <span class="stringliteral">&quot;-N&quot;</span>, <span class="stringliteral">&quot;--iterations&quot;</span>, <span class="stringliteral">&quot;--repeats&quot;</span>}.<a class="code hl_function" href="classclipp_1_1parameter.html#ab80dc22eea997a29536884baed01ec60">required</a>(<span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> valN = <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{match::any}</div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1parameter.html#a1797e20c969e1af04136adeb67c034f9">label</a>(<span class="stringliteral">&quot;times&quot;</span>)</div>
<div class="line">    .set(n)</div>
<div class="line">    .call([](<span class="keywordtype">string</span> s) { <span class="keywordflow">if</span>(!str::represents_number(s)) <span class="keywordflow">throw</span> runtime_error{<span class="stringliteral">&quot;invalid value for &#39;times&#39;&quot;</span>}; })</div>
<div class="line">    .if_missing([]{ cout &lt;&lt; <span class="stringliteral">&quot;value &#39;times&#39; not found!\n&quot;</span>; })</div>
<div class="line">    .doc(<span class="stringliteral">&quot;number of iterations (default = &quot;</span> + std::to_string(n) + <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = <a class="code hl_class" href="classclipp_1_1group.html">group</a>{};</div>
<div class="line">cli.<a class="code hl_function" href="classclipp_1_1group.html#ac13bc585bfd4664044b39143596b98ea">push_back</a>(std::move(optN));</div>
<div class="line">cli.<a class="code hl_function" href="classclipp_1_1group.html#ac13bc585bfd4664044b39143596b98ea">push_back</a>(std::move(valN));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// or:</span></div>
<div class="line"><span class="keyword">auto</span> cli = <a class="code hl_class" href="classclipp_1_1group.html">group</a>{std::move(optN), std::move(valN)};</div>
<div class="ttc" id="aclassclipp_1_1group_html"><div class="ttname"><a href="classclipp_1_1group.html">clipp::group</a></div><div class="ttdoc">group of parameters and/or other groups; can be configured to act as a group of alternatives (exclusi...</div><div class="ttdef"><b>Definition</b> clipp.h:2578</div></div>
<div class="ttc" id="aclassclipp_1_1group_html_ac13bc585bfd4664044b39143596b98ea"><div class="ttname"><a href="classclipp_1_1group.html#ac13bc585bfd4664044b39143596b98ea">clipp::group::push_back</a></div><div class="ttdeci">group &amp; push_back(const parameter &amp;v)</div><div class="ttdoc">adds child parameter at the end</div><div class="ttdef"><b>Definition</b> clipp.h:3261</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md22"></a>
Flag Strings</h2>
<p>There are no limitations regarding formatting and you can have an arbitrary number of flags per command line parameter. </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> onetwo = <span class="keyword">false</span>;</div>
<div class="line"><span class="keyword">auto</span> myopt = option(<span class="stringliteral">&quot;-1&quot;</span>, <span class="stringliteral">&quot;-2&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;:1&quot;</span>, <span class="stringliteral">&quot;:2&quot;</span>, <span class="stringliteral">&quot;--no1&quot;</span>, <span class="stringliteral">&quot;--no2&quot;</span>).set(onetwo);</div>
<div class="line">             <span class="comment">//     ^----- will match any one of these strings ------^</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md23"></a>
Same prefix for all flags</h3>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> a = <span class="keyword">false</span>, b = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = with_prefix(<span class="stringliteral">&quot;-&quot;</span>, </div>
<div class="line">    option(<span class="stringliteral">&quot;a&quot;</span>).set(a),     <span class="comment">// -a</span></div>
<div class="line">    option(<span class="stringliteral">&quot;b&quot;</span>).set(b)      <span class="comment">// -b</span></div>
<div class="line">);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md24"></a>
Same prefix for all flags: single vs. multiple character(s)</h3>
<p>Single-letter flags will get the first prefix, flags with more than one letter will get the second one. </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> a = <span class="keyword">false</span>, b = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = with_prefixes_short_long(<span class="stringliteral">&quot;-&quot;</span>, <span class="stringliteral">&quot;--&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;all&quot;</span>).set(a),      <span class="comment">// -a, --all</span></div>
<div class="line">    option(<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;bottom&quot;</span>).set(b)    <span class="comment">// -b, --bottom</span></div>
<div class="line">);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25"></a>
Same suffix for all flags</h3>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> a = <span class="keyword">false</span>, b = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = with_suffix(<span class="stringliteral">&quot;:&quot;</span>, </div>
<div class="line">    option(<span class="stringliteral">&quot;a&quot;</span>).set(a),     <span class="comment">// a:</span></div>
<div class="line">    option(<span class="stringliteral">&quot;b&quot;</span>).set(b)      <span class="comment">// b:</span></div>
<div class="line">);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md26"></a>
Same suffix for all flags: single vs. multiple character(s)</h3>
<p>Single-letter flags will get the first suffix (empty in this example), flags with more than one letter will get the second one. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> a = 0, b = 0;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = with_suffixes_short_long(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;=&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;all&quot;</span>) &amp; value(<span class="stringliteral">&quot;A&quot;</span>, a),      <span class="comment">// -a, --all=</span></div>
<div class="line">    option(<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;bottom&quot;</span>) &amp; value(<span class="stringliteral">&quot;B&quot;</span>, b)    <span class="comment">// -b, --bottom=</span></div>
<div class="line">);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md27"></a>
Make Sure No Flag Occurs As Prefix Of Another Flag</h3>
<div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( <span class="comment">/* your command line interface here */</span> );</div>
<div class="line">assert(cli.flags_are_prefix_free());</div>
</div><!-- fragment --><p> Note that identical flags will not trigger an error.</p>
<h2><a class="anchor" id="autotoc_md28"></a>
Grouping</h2>
<p>Groups can be nested (see here) and have their own documentation string. The statement <code>auto cli = ( ... );</code> creates a group, if there are more than two parameters/groups declared inside the parentheses.</p>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">        myprogram [x] [y] [a] [b] [-c] [-d] [-e] [-f]</div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">        x      sets X</div>
<div class="line">        y      sets Y</div>
<div class="line"> </div>
<div class="line">        documented group 1:</div>
<div class="line">        a      activates A</div>
<div class="line">        b      activates B</div>
<div class="line"> </div>
<div class="line">        documented group 2:</div>
<div class="line">        -c     activates C</div>
<div class="line">        -d     activates D</div>
<div class="line"> </div>
<div class="line">        -e, -f activates E or F</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">bool</span> x = <span class="keyword">false</span>, y = <span class="keyword">false</span>, a = <span class="keyword">false</span>, b = <span class="keyword">false</span>;</div>
<div class="line"><span class="keywordtype">bool</span> g = <span class="keyword">false</span>, h = <span class="keyword">false</span>, e = <span class="keyword">false</span>, f = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    (   option(<span class="stringliteral">&quot;x&quot;</span>).set(x) % <span class="stringliteral">&quot;sets X&quot;</span>,  <span class="comment">//simple group </span></div>
<div class="line">        option(<span class="stringliteral">&quot;y&quot;</span>).set(y) % <span class="stringliteral">&quot;sets Y&quot;</span></div>
<div class="line">    ),</div>
<div class="line">    (   option(<span class="stringliteral">&quot;a&quot;</span>).set(a) % <span class="stringliteral">&quot;activates A&quot;</span>,   </div>
<div class="line">        option(<span class="stringliteral">&quot;b&quot;</span>).set(b) % <span class="stringliteral">&quot;activates B&quot;</span> </div>
<div class="line">    ) % <span class="stringliteral">&quot;documented group 1:&quot;</span>           <span class="comment">//docstring after group</span></div>
<div class="line">    ,</div>
<div class="line">    <span class="stringliteral">&quot;documented group 2:&quot;</span> % (           <span class="comment">//docstring before group</span></div>
<div class="line">        option(<span class="stringliteral">&quot;-g&quot;</span>).set(g) % <span class="stringliteral">&quot;activates G&quot;</span>,   </div>
<div class="line">        option(<span class="stringliteral">&quot;-h&quot;</span>).set(h) % <span class="stringliteral">&quot;activates H&quot;</span> </div>
<div class="line">    ),</div>
<div class="line">    <span class="stringliteral">&quot;activates E or F&quot;</span> % (              </div>
<div class="line">        option(<span class="stringliteral">&quot;-e&quot;</span>).set(e),        <span class="comment">//no docstrings inside group</span></div>
<div class="line">        option(<span class="stringliteral">&quot;-f&quot;</span>).set(f)</div>
<div class="line">    )</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">cout &lt;&lt; make_man_page(cli, <span class="stringliteral">&quot;myprogram&quot;</span>);</div>
</div><!-- fragment --><p>The above example is in fact shorthand for this: </p><div class="fragment"><div class="line"><a class="code hl_class" href="classclipp_1_1group.html">group</a> cli{</div>
<div class="line">    <a class="code hl_class" href="classclipp_1_1group.html">group</a>{   </div>
<div class="line">        <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{<span class="stringliteral">&quot;x&quot;</span>}.set(x).doc(<span class="stringliteral">&quot;sets X&quot;</span>),</div>
<div class="line">        <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{<span class="stringliteral">&quot;y&quot;</span>}.set(y).doc(<span class="stringliteral">&quot;sets Y&quot;</span>)</div>
<div class="line">    },</div>
<div class="line">    <a class="code hl_class" href="classclipp_1_1group.html">group</a>{</div>
<div class="line">        <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{<span class="stringliteral">&quot;a&quot;</span>}.set(a).doc(<span class="stringliteral">&quot;activates A&quot;</span>),   </div>
<div class="line">        <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{<span class="stringliteral">&quot;b&quot;</span>}.set(b).doc(<span class="stringliteral">&quot;activates B&quot;</span>)</div>
<div class="line">    }.doc(<span class="stringliteral">&quot;documented group 1:&quot;</span>)</div>
<div class="line">    ,</div>
<div class="line">    <a class="code hl_class" href="classclipp_1_1group.html">group</a>{</div>
<div class="line">        <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{<span class="stringliteral">&quot;-g&quot;</span>}.set(g).doc(<span class="stringliteral">&quot;activates G&quot;</span>),   </div>
<div class="line">        <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{<span class="stringliteral">&quot;-h&quot;</span>}.set(h).doc(<span class="stringliteral">&quot;activates H&quot;</span>)</div>
<div class="line">    }.doc(<span class="stringliteral">&quot;documented group 2:&quot;</span>)</div>
<div class="line">    ,</div>
<div class="line">    <a class="code hl_class" href="classclipp_1_1group.html">group</a>{</div>
<div class="line">        <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{<span class="stringliteral">&quot;-e&quot;</span>}.set(e), </div>
<div class="line">        <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{<span class="stringliteral">&quot;-f&quot;</span>}.set(f)</div>
<div class="line">    }.doc(<span class="stringliteral">&quot;activates E or F&quot;</span>)</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">cout &lt;&lt; <a class="code hl_function" href="namespaceclipp.html#a3616cbfc340cc4e9e2890609ae1a808d">make_man_page</a>(cli, <span class="stringliteral">&quot;myprogram&quot;</span>);</div>
</div><!-- fragment --><p>You can of course also fill groups one-by-one: </p><div class="fragment"><div class="line"><a class="code hl_class" href="classclipp_1_1group.html">group</a> cli;</div>
<div class="line">cli.<a class="code hl_function" href="classclipp_1_1group.html#ac13bc585bfd4664044b39143596b98ea">push_back</a>(option(<span class="stringliteral">&quot;x&quot;</span>).sets(x).doc(<span class="stringliteral">&quot;sets X&quot;</span>));</div>
<div class="line"><span class="comment">//...</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md29"></a>
Required Positional Values</h2>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">        myprogram &lt;infile&gt; &lt;outfile&gt; [-s]</div>
<div class="line">   </div>
<div class="line">OPTIONS</div>
<div class="line">        infile        input filename</div>
<div class="line">        outfile       output filename</div>
<div class="line">        -s, --split   split files</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">string</span> ifile, ofile;</div>
<div class="line"><span class="keywordtype">bool</span> split = <span class="keyword">false</span>; </div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    value(<span class="stringliteral">&quot;infile&quot;</span>, ifile)             % <span class="stringliteral">&quot;input filename&quot;</span>,</div>
<div class="line">    value(<span class="stringliteral">&quot;outfile&quot;</span>, ofile)            % <span class="stringliteral">&quot;output filename&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;-s&quot;</span>, <span class="stringliteral">&quot;--split&quot;</span>).set(split) % <span class="stringliteral">&quot;split files&quot;</span> );</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md30"></a>
Alternative Value Mapping Style</h3>
<div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">     value(<span class="stringliteral">&quot;infile&quot;</span>)         % <span class="stringliteral">&quot;input filename&quot;</span>  &gt;&gt; ifile,</div>
<div class="line">     value(<span class="stringliteral">&quot;outfile&quot;</span>)        % <span class="stringliteral">&quot;output filename&quot;</span> &gt;&gt; ofile,</div>
<div class="line">     option(<span class="stringliteral">&quot;-s&quot;</span>, <span class="stringliteral">&quot;--split&quot;</span>) % <span class="stringliteral">&quot;split files&quot;</span>     &gt;&gt; split  );</div>
</div><!-- fragment --><p> See here for more on possible mapping styles.</p>
<h2><a class="anchor" id="autotoc_md31"></a>
Options With Values</h2>
<p>Parameters can be sequenced using operator <code>&amp;</code> or the function <code>in_sequence</code>. Sequenced parameters can only be matched one after the other. This mechanism can be used to attach a value parameter to an option.</p>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">       simplify [-n &lt;count&gt;] [-r &lt;ratio&gt;] [-m [&lt;lines=5&gt;]] </div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">       -n, --count &lt;count&gt;     number of iterations</div>
<div class="line">       -r, --ratio &lt;ratio&gt;     compression ratio</div>
<div class="line">       -m &lt;lines=5&gt;            merge lines (default: 5)</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">int</span> n = 0;</div>
<div class="line"><span class="keywordtype">bool</span> domerge = <span class="keyword">false</span>;</div>
<div class="line"><span class="keywordtype">long</span> m = 5;</div>
<div class="line"><span class="keyword">auto</span> print_ratio = [](<span class="keyword">const</span> <span class="keywordtype">char</span>* r) { cout &lt;&lt; <span class="stringliteral">&quot;using ratio of &quot;</span> &lt;&lt; r &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>; };</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = ( </div>
<div class="line">    (option(<span class="stringliteral">&quot;-n&quot;</span>, <span class="stringliteral">&quot;--count&quot;</span>) &amp; value(<span class="stringliteral">&quot;count&quot;</span>, n))           % <span class="stringliteral">&quot;number of iterations&quot;</span>,</div>
<div class="line">    (option(<span class="stringliteral">&quot;-r&quot;</span>, <span class="stringliteral">&quot;--ratio&quot;</span>) &amp; value(<span class="stringliteral">&quot;ratio&quot;</span>, print_ratio)) % <span class="stringliteral">&quot;compression ratio&quot;</span>,</div>
<div class="line">    (option(<span class="stringliteral">&quot;-m&quot;</span>).set(domerge) &amp; opt_value(<span class="stringliteral">&quot;lines=5&quot;</span>, m))   % <span class="stringliteral">&quot;merge lines (default: 5)&quot;</span></div>
<div class="line">);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md32"></a>
Alternative Value Mapping Styles</h3>
<div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( </div>
<div class="line">    (option(<span class="stringliteral">&quot;-n&quot;</span>, <span class="stringliteral">&quot;--count&quot;</span>) &amp; value(<span class="stringliteral">&quot;count&quot;</span>) &gt;&gt; n                 ) % <span class="stringliteral">&quot;number of iterations&quot;</span>,</div>
<div class="line">    (option(<span class="stringliteral">&quot;-r&quot;</span>, <span class="stringliteral">&quot;--ratio&quot;</span>) &amp; value(<span class="stringliteral">&quot;ratio&quot;</span>) &gt;&gt; print_ratio       ) % <span class="stringliteral">&quot;compression ratio&quot;</span>,</div>
<div class="line">    (option(<span class="stringliteral">&quot;-m&quot;</span>           ) &amp; opt_value(<span class="stringliteral">&quot;lines=5&quot;</span>) &gt;&gt; m &gt;&gt; domerge) % <span class="stringliteral">&quot;merge lines (default: 5)&quot;</span> </div>
<div class="line">);</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( </div>
<div class="line">    (option(<span class="stringliteral">&quot;-n&quot;</span>, <span class="stringliteral">&quot;--count&quot;</span>) &amp; value(<span class="stringliteral">&quot;count&quot;</span>).set(n))         % <span class="stringliteral">&quot;number of iterations&quot;</span>,</div>
<div class="line">    (option(<span class="stringliteral">&quot;-r&quot;</span>, <span class="stringliteral">&quot;--ratio&quot;</span>) &amp; value(<span class="stringliteral">&quot;ratio&quot;</span>)(print_ratio))   % <span class="stringliteral">&quot;compression ratio&quot;</span>,</div>
<div class="line">    (option(<span class="stringliteral">&quot;-m&quot;</span>).set(domerge) &amp; opt_value(<span class="stringliteral">&quot;lines=5&quot;</span>).set(m)) % <span class="stringliteral">&quot;merge lines (default: 5)&quot;</span></div>
<div class="line">);</div>
</div><!-- fragment --><p> See here for more on coding styles.</p>
<h2><a class="anchor" id="autotoc_md33"></a>
Options With Multiple Values</h2>
<p>Parameters can be sequenced using operator <code>&amp;</code> or the function <code>in_sequence</code>. Sequenced parameters can only be matched one after the other. This mechanism can be used to attach multiple values to an option.</p>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">       transform &lt;geometry file&gt; [-translate &lt;x&gt; &lt;y&gt; &lt;z&gt;] [-rotate &lt;azimuth&gt; &lt;polar&gt;]</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">string</span> infile;</div>
<div class="line"><span class="keywordtype">bool</span> tr = <span class="keyword">false</span>, rot = <span class="keyword">false</span>;</div>
<div class="line"><span class="keywordtype">double</span> x = 0, y = 0, z = 0;</div>
<div class="line"><span class="keywordtype">double</span> phi = 0, theta = 0;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    value(<span class="stringliteral">&quot;geometry file&quot;</span>, infile),</div>
<div class="line">    option(<span class="stringliteral">&quot;-translate&quot;</span>).set(tr) &amp; value(<span class="stringliteral">&quot;x&quot;</span>, x) &amp; value(<span class="stringliteral">&quot;y&quot;</span>, y) &amp; value(<span class="stringliteral">&quot;z&quot;</span>, z),</div>
<div class="line">    option(<span class="stringliteral">&quot;-rotate&quot;</span>).set(rot) &amp; value(<span class="stringliteral">&quot;azimuth&quot;</span>, phi) &amp; value(<span class="stringliteral">&quot;polar&quot;</span>, theta)</div>
<div class="line">);</div>
</div><!-- fragment --><p>Note that the following interface definition is equivalent to the above. Since <code>value</code> is positional we can list it with <code>,</code>, but we have to make sure that the groups of values will only be matched after the options, hence the <code>&amp;</code>. </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    value(<span class="stringliteral">&quot;geometry file&quot;</span>, infile),</div>
<div class="line">    option(<span class="stringliteral">&quot;-translate&quot;</span>).set(tr) &amp; ( value(<span class="stringliteral">&quot;x&quot;</span>, x), value(<span class="stringliteral">&quot;y&quot;</span>, y), value(<span class="stringliteral">&quot;z&quot;</span>, z) ),</div>
<div class="line">    option(<span class="stringliteral">&quot;-rotate&quot;</span>).set(rot)   &amp; ( value(<span class="stringliteral">&quot;azimuth&quot;</span>, phi) , value(<span class="stringliteral">&quot;polar&quot;</span>, theta) )</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md34"></a>
Required Flags</h2>
<p>Required flags are usually used together with non-optional values. Note that <code>-i</code> and <code>-o</code> are not positional in the following example, i.e., the relative order in which command line arguments for <code>-i</code>, <code>-o</code> and <code>-r</code> are provided is irrelevant.</p>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">        myprogram [-r] -i &lt;input dir&gt; -o &lt;output dir&gt;</div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">        -r, --recursive</div>
<div class="line">                search in subdirectories</div>
<div class="line">        -i, --in &lt;input dir&gt;</div>
<div class="line">                path to input directory</div>
<div class="line">        -o, --out &lt;output dir&gt;</div>
<div class="line">                path to output directory</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">bool</span> recurse = <span class="keyword">false</span>;</div>
<div class="line"><span class="keywordtype">string</span> inpath, outpath;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    option(<span class="stringliteral">&quot;-r&quot;</span>, <span class="stringliteral">&quot;--recursive&quot;</span>).set(recurse)                 % <span class="stringliteral">&quot;search in subdirectories&quot;</span>,</div>
<div class="line">    (required(<span class="stringliteral">&quot;-i&quot;</span>, <span class="stringliteral">&quot;--in&quot;</span> ) &amp; value(<span class="stringliteral">&quot;input dir&quot;</span>, inpath))   % <span class="stringliteral">&quot;path to input directory&quot;</span>,</div>
<div class="line">    (required(<span class="stringliteral">&quot;-o&quot;</span>, <span class="stringliteral">&quot;--out&quot;</span>) &amp; value(<span class="stringliteral">&quot;output dir&quot;</span>, outpath)) % <span class="stringliteral">&quot;path to output directory&quot;</span></div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md35"></a>
Repeatable Parameters</h2>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">        simplify &lt;file&gt;... [-c] [-i &lt;line&gt;...]</div>
<div class="line">   </div>
<div class="line">OPTIONS</div>
<div class="line">        &lt;file&gt;...               input files</div>
<div class="line">        -c, --compress          compress results             </div>
<div class="line">        -i, --ignore &lt;line&gt;...  lines to be ignored</div>
</div><!-- fragment --><div class="fragment"><div class="line">vector&lt;string&gt; files;</div>
<div class="line">vector&lt;int&gt; lines;</div>
<div class="line"><span class="keywordtype">bool</span> zip = <span class="keyword">false</span>;</div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    values(<span class="stringliteral">&quot;file&quot;</span>, files)                                % <span class="stringliteral">&quot;input files&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;-c&quot;</span>, <span class="stringliteral">&quot;--compress&quot;</span>).set(zip)                  % <span class="stringliteral">&quot;compress results&quot;</span>,</div>
<div class="line">    (option(<span class="stringliteral">&quot;-i&quot;</span>, <span class="stringliteral">&quot;--ignore&quot;</span>) &amp; integers(<span class="stringliteral">&quot;line&quot;</span>, lines)) % <span class="stringliteral">&quot;lines to be ignored&quot;</span></div>
<div class="line">);</div>
</div><!-- fragment --><p>The call <code>values("v")</code> is shorthand for <code>value("v").repeatable(true)</code>.</p>
<p>Note, that the value parameter <code>line</code> is repeatable, but the flag <code>--ignore</code> is not. So something like </p><div class="fragment"><div class="line">simplify file1 file2 --ignore 1 2 --ignore 3 4 -c</div>
</div><!-- fragment --><p> is taken to be an error. However, it is possible if you make the group of <code>--ignore</code> and <code>line</code> itself repeatable:</p>
<h3><a class="anchor" id="autotoc_md36"></a>
Repeatable Groups of Options with Repeatable Values</h3>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">        simplify &lt;file&gt;... [-c] [-i &lt;line&gt;...]...</div>
<div class="line">   </div>
<div class="line">OPTIONS</div>
<div class="line">        &lt;file&gt;...               input files</div>
<div class="line">        -c, --compress          compress results             </div>
<div class="line">        -i, --ignore &lt;line&gt;...  lines to be ignored</div>
</div><!-- fragment --><div class="fragment"><div class="line">vector&lt;string&gt; files;</div>
<div class="line">vector&lt;int&gt; lines;</div>
<div class="line"><span class="keywordtype">bool</span> zip = <span class="keyword">false</span>;</div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    values(<span class="stringliteral">&quot;file&quot;</span>, files)                            % <span class="stringliteral">&quot;input files&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;-c&quot;</span>, <span class="stringliteral">&quot;--compress&quot;</span>).set(zip)              % <span class="stringliteral">&quot;compress results&quot;</span>,</div>
<div class="line">    repeatable(  <span class="comment">// &lt;-----</span></div>
<div class="line">        option(<span class="stringliteral">&quot;-i&quot;</span>, <span class="stringliteral">&quot;--ignore&quot;</span>) &amp; integers(<span class="stringliteral">&quot;line&quot;</span>, lines)</div>
<div class="line">    )                                                % <span class="stringliteral">&quot;lines to be ignored&quot;</span></div>
<div class="line">);</div>
</div><!-- fragment --><p> Now both the option <code>--ignore</code> <em>and</em> the value parameter <code>value</code> are repeatable. In all of the following examples <code>lines</code> will be set to <code>{1,2,3,4}</code> and <code>c</code> will be set to <code>true</code>: </p><div class="fragment"><div class="line">simplify file1 file2 -c --ignore 1 2 3 4 </div>
<div class="line">simplify file1 file2 --ignore 1 2 3 4 -c</div>
<div class="line">simplify file1 file2 --ignore 1 -c --ignore 2 3 4</div>
<div class="line">simplify file1 file2 --ignore 1 2 --ignore 3 4 -c</div>
<div class="line">simplify file1 file2 --ignore 1 --ignore 2 -c --ignore 3 --ignore 4</div>
<div class="line">simplify file1 file2 -c --ignore1 --ignore2 --ignore3 --ignore4</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md37"></a>
Actions</h2>
<p>Actions are executed if a parameter matched an argument string in the command line arguments list. Actions are defined using the following member functions or operators:</p>
<ul>
<li><code>parameter::call(f)</code> or <code>parameter::operator () (f)</code>: call a callable entity <code>f</code> (function, lambda, custom function object) for each one of the matched argument strings. If <code>f</code> accepts exactly one parameter that is convertible from <code>const char*</code>, the command line argument is passed to it. If the parameter list is empty, it is simply called without argument.</li>
<li><code>parameter::set(target, value)</code>: assign a fixed value to a target object; note that the assignment <code>target = value;</code> must be a valid statement</li>
<li><code>parameter::set(target)</code>:<ul>
<li>A <code>bool</code> target is set to true if the flag/value is present and <b>left unchanged otherwise</b>.</li>
<li>A target object of fundamental type <code>T</code> (<code>int</code>, <code>long</code>, <code>float</code>, <code>double</code>, ...) will be assigned the result of converting the argument string to type <code>T</code>.</li>
<li>Targets of type <code>std::vector&lt;T&gt;</code> are appended with a value for each matched argument string. Note that <code>T</code> must either be (explicitly) convertible from <code>const char*</code> or a fundamental type.</li>
</ul>
</li>
<li><code>operator &lt;&lt;</code> or <code>operator &gt;&gt;</code> assign arg strings to lvalues or call callable entities. Which kind of action will be performed is automatically determined through overload resolution.</li>
</ul>
<h3><a class="anchor" id="autotoc_md38"></a>
Predefined Functions</h3>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> x = 0;                   <span class="comment">// equivalent to:     </span></div>
<div class="line">option(<span class="stringliteral">&quot;-x&quot;</span>)(set(x))         <span class="comment">// option(&quot;-x&quot;).set(x) </span></div>
<div class="line">option(<span class="stringliteral">&quot;-x&quot;</span>)(set(x,2))       <span class="comment">// option(&quot;-x&quot;).set(x,2) </span></div>
<div class="line">option(<span class="stringliteral">&quot;-x&quot;</span>)(increment(x))   <span class="comment">// option(&quot;-x&quot;)([&amp;]{++x;})</span></div>
<div class="line">option(<span class="stringliteral">&quot;-x&quot;</span>)(decrement(x))   <span class="comment">// option(&quot;-x&quot;)([&amp;]{--x;})</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> b = <span class="keyword">false</span>;              <span class="comment">// equivalent to:</span></div>
<div class="line">option(<span class="stringliteral">&quot;-b&quot;</span>)(flip(b))        <span class="comment">// option(&quot;-x&quot;)([&amp;]{b = !b;})</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md39"></a>
Some Examples</h3>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> a = <span class="keyword">false</span>, b = <span class="keyword">false</span>;</div>
<div class="line"><span class="keywordtype">int</span> i = 1, n = 0, m = 0;</div>
<div class="line"><span class="keywordtype">float</span> x = 0.0f;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = (                           <span class="comment">//INFORMAL description</span></div>
<div class="line">    option(<span class="stringliteral">&quot;-a&quot;</span>).set(a),               <span class="comment">//if(found(&quot;-a&quot;)) a = true;</span></div>
<div class="line">    option(<span class="stringliteral">&quot;-b&quot;</span>) &gt;&gt; b,                 <span class="comment">//if(found(&quot;-b&quot;)) b = true;</span></div>
<div class="line">    option(<span class="stringliteral">&quot;--toggle&quot;</span>).call(flip(b)),  <span class="comment">//if(found(&quot;--toggle&quot;)) flip(b);</span></div>
<div class="line"> </div>
<div class="line">    value(<span class="stringliteral">&quot;n&quot;</span>).set(n),                 <span class="comment">//n = std::atoi(arg);</span></div>
<div class="line">    option(<span class="stringliteral">&quot;-i&quot;</span>) &amp; value(<span class="stringliteral">&quot;#&quot;</span>,i),       <span class="comment">//if(found(&quot;-i arg&quot;)) i = std::atoi(arg);</span></div>
<div class="line">    option(<span class="stringliteral">&quot;-1&quot;</span>).set(m,1),             <span class="comment">//if(found(&quot;-1&quot;)) m = 1;</span></div>
<div class="line">    option(<span class="stringliteral">&quot;-2&quot;</span>).set(m,2),             <span class="comment">//if(found(&quot;-2&quot;)) m = 2;</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">//if(found(&quot;-z&quot;)) call_lambda_with_arg(&quot;-z&quot;);</span></div>
<div class="line">    option(<span class="stringliteral">&quot;-z&quot;</span>).call([](<span class="keyword">const</span> <span class="keywordtype">char</span>* s) { cout &lt;&lt; s; }),</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//using &#39;operator()&#39; instead of &#39;call&#39;</span></div>
<div class="line">    <span class="comment">//if(found(&quot;bob&quot;)) call_lambda_with_arg(&quot;bob&quot;);</span></div>
<div class="line">    option(<span class="stringliteral">&quot;bob&quot;</span>)([](<span class="keyword">const</span> std::string&amp; s) { cout &lt;&lt; s; }),</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//for_each_occurence(&quot;-x arg&quot;, call_lambda_with_arg(arg));</span></div>
<div class="line">    <a class="code hl_function" href="namespaceclipp.html#a7de409905bae818ae92c3573c1cd7a6e">repeatable</a>( <a class="code hl_function" href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">option</a>(<span class="stringliteral">&quot;-x&quot;</span>) &amp; <a class="code hl_function" href="namespaceclipp.html#a3cecc1b8e2ded82a4e6aff98d1f308a7">value</a>(<span class="stringliteral">&quot;X&quot;</span>)([&amp;](<span class="keyword">const</span> <span class="keywordtype">char</span>* s) { x = std::atof(s); }) ),</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">option</a>(<span class="stringliteral">&quot;--all&quot;</span>) &gt;&gt; []()              { cout &lt;&lt; <span class="stringliteral">&quot;found --all\n&quot;</span>; }</div>
<div class="line">                    &gt;&gt; [](<span class="keyword">const</span> <span class="keywordtype">char</span>* s) { cout &lt;&lt; <span class="stringliteral">&quot;found flag &quot;</span> &lt;&lt; s &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>; };</div>
<div class="line">);</div>
<div class="ttc" id="anamespaceclipp_html_a7de409905bae818ae92c3573c1cd7a6e"><div class="ttname"><a href="namespaceclipp.html#a7de409905bae818ae92c3573c1cd7a6e">clipp::repeatable</a></div><div class="ttdeci">parameter repeatable(parameter p)</div><div class="ttdoc">makes a repeatable copy of a parameter</div><div class="ttdef"><b>Definition</b> clipp.h:3784</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md40"></a>
Joinable Flags</h2>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">        edit &lt;file&gt; [-rbs] ([:vim] [:st3] [:atom] [:emacs])</div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">        -r      open read-only</div>
<div class="line">        -b      use backup file</div>
<div class="line">        -s      use swap file</div>
<div class="line"> </div>
<div class="line">        :vim, :st3, :atom, :emacs</div>
<div class="line">                editor(s) to use; multiple possible        </div>
</div><!-- fragment --><div class="fragment"><div class="line">std::string file;</div>
<div class="line"><span class="keywordtype">bool</span> readonly = <span class="keyword">false</span>, usebackup = <span class="keyword">false</span>, useswap = <span class="keyword">false</span>;</div>
<div class="line"><span class="keyword">enum class</span> editor {vim, sublime3, atom, emacs};</div>
<div class="line">std::vector&lt;editor&gt; editors;</div>
<div class="line"><span class="keyword">auto</span> add = [&amp;](editor e){ <span class="keywordflow">return</span> [&amp;]{ editors.push_back(e); }; };</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    <a class="code hl_function" href="namespaceclipp.html#a3cecc1b8e2ded82a4e6aff98d1f308a7">value</a>(<span class="stringliteral">&quot;file&quot;</span>, file),</div>
<div class="line">    <a class="code hl_function" href="namespaceclipp.html#a2016b3961d790070f15fc25873232785">joinable</a>(</div>
<div class="line">        <a class="code hl_function" href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">option</a>(<span class="stringliteral">&quot;-r&quot;</span>).<a class="code hl_function" href="namespaceclipp.html#a26d28e2c0b96c9d171cca4d694b866fd">set</a>(readonly)  % <span class="stringliteral">&quot;open read-only&quot;</span>,</div>
<div class="line">        <a class="code hl_function" href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">option</a>(<span class="stringliteral">&quot;-b&quot;</span>).<a class="code hl_function" href="namespaceclipp.html#a26d28e2c0b96c9d171cca4d694b866fd">set</a>(usebackup) % <span class="stringliteral">&quot;use backup file&quot;</span>,</div>
<div class="line">        <a class="code hl_function" href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">option</a>(<span class="stringliteral">&quot;-s&quot;</span>).<a class="code hl_function" href="namespaceclipp.html#a26d28e2c0b96c9d171cca4d694b866fd">set</a>(useswap)   % <span class="stringliteral">&quot;use swap file&quot;</span></div>
<div class="line">    ),</div>
<div class="line">    <a class="code hl_function" href="namespaceclipp.html#a2016b3961d790070f15fc25873232785">joinable</a>(</div>
<div class="line">        <a class="code hl_function" href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">option</a>(<span class="stringliteral">&quot;:vim&quot;</span>)    &gt;&gt; add(editor::vim),</div>
<div class="line">        <a class="code hl_function" href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">option</a>(<span class="stringliteral">&quot;:st3&quot;</span>)    &gt;&gt; add(editor::sublime3),</div>
<div class="line">        <a class="code hl_function" href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">option</a>(<span class="stringliteral">&quot;:atom&quot;</span>)   &gt;&gt; add(editor::atom),</div>
<div class="line">        <a class="code hl_function" href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">option</a>(<span class="stringliteral">&quot;:emacs&quot;</span>)  &gt;&gt; add(editor::emacs)</div>
<div class="line">    ) % <span class="stringliteral">&quot;editor(s) to use; multiple possible&quot;</span></div>
<div class="line">);</div>
<div class="ttc" id="anamespaceclipp_html_a2016b3961d790070f15fc25873232785"><div class="ttname"><a href="namespaceclipp.html#a2016b3961d790070f15fc25873232785">clipp::joinable</a></div><div class="ttdeci">group joinable(group g)</div><div class="ttdoc">makes a group of parameters and/or groups where all single char flag params (&quot;-a&quot;,...</div><div class="ttdef"><b>Definition</b> clipp.h:3749</div></div>
<div class="ttc" id="anamespaceclipp_html_a26d28e2c0b96c9d171cca4d694b866fd"><div class="ttname"><a href="namespaceclipp.html#a26d28e2c0b96c9d171cca4d694b866fd">clipp::set</a></div><div class="ttdeci">detail::assign_value&lt; T, V &gt; set(T &amp;target, V value)</div><div class="ttdoc">makes function object with a const char* parameter that assigns a value to a ref-captured object</div><div class="ttdef"><b>Definition</b> clipp.h:1072</div></div>
</div><!-- fragment --><ul>
<li>Flags can be joined regardless of their length (second group in the example).</li>
<li>If the flags have a common prefix (<code>-</code> or <code>:</code> in the example) it must be given at least once as leading prefix in the command line argument.</li>
<li>Allowed args for the first group are: <div class="fragment"><div class="line">-r</div>
</div><!-- fragment --> , <code>-b</code>, <code>-s</code>, <code>-rb</code>, <code>-br</code>, <code>-rs</code>, <code>-sr</code>, <div class="fragment"><div class="line">-sb</div>
</div><!-- fragment --> , <code>-bs</code>, <code>-rbs</code>, <code>-rsb</code>, ...</li>
<li>Allowed args for the second group are: <div class="fragment"><div class="line">:vim</div>
</div><!-- fragment --> , <code>:vim:atom</code>, <code>:emacs:st3</code>, <code>:vimatom</code>, ...</li>
</ul>
<h3><a class="anchor" id="autotoc_md41"></a>
More Examples</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">joinable flags   </th><th class="markdownTableHeadNone">valid args    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>a</code>, <code>b</code>   </td><td class="markdownTableBodyNone"><code>ab</code>, <code>ba</code>, <code>a</code>, <code>b</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>-a</code>, <code>-b</code>   </td><td class="markdownTableBodyNone"><code>-ab</code>, <code>-ba</code>, <code>-a</code>, <code>-b</code>, <code>-a-b</code>, <code>-b-a</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>--a</code>, <code>--b</code>   </td><td class="markdownTableBodyNone"><code>--ab</code>, <code>--ba</code>, <code>--a</code>, <code>--b</code>, <code>--a--b</code>, <code>--b--a</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>,a</code>, <code>,b</code>   </td><td class="markdownTableBodyNone"><code>,ab</code>, <code>,ba</code>, <code>,a</code>, <code>,b</code>, <code>,a,b</code>, <code>,b,a</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Xab</code>, <code>Xcd</code>   </td><td class="markdownTableBodyNone"><code>Xabcd</code>, <code>Xcdab</code>, <code>XabXcd</code>, <code>XcdXab</code>, <code>Xab</code>, <code>Xcd</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>x:ab</code>, <code>x:cd</code>   </td><td class="markdownTableBodyNone"><code>x:abcd</code>, <code>x:cdab</code>, <code>x:abx:cd</code>, <code>x:cdx:ab</code>, <code>x:ab</code>, <code>x:cd</code>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md42"></a>
Alternatives</h2>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">        find &lt;file&gt;... -s &lt;expr&gt; [any|all]</div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">        &lt;file&gt;...  input filenames</div>
<div class="line">        -s &lt;expr&gt;  string to look for</div>
<div class="line">        any        report as soon as any matches</div>
<div class="line">        all        report only if all match</div>
</div><!-- fragment --><div class="fragment"><div class="line">vector&lt;string&gt; files;</div>
<div class="line"><span class="keywordtype">string</span> expr;</div>
<div class="line"><span class="keywordtype">bool</span> ifany = <span class="keyword">false</span>, ifall = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    values(<span class="stringliteral">&quot;file&quot;</span>, files)                  % <span class="stringliteral">&quot;input filenames&quot;</span>,</div>
<div class="line">    (required(<span class="stringliteral">&quot;-s&quot;</span>) &amp; value(<span class="stringliteral">&quot;expr&quot;</span>, expr)) % <span class="stringliteral">&quot;string to look for&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;any&quot;</span>).set(ifany)               % <span class="stringliteral">&quot;report as soon as any matches&quot;</span> |</div>
<div class="line">    option(<span class="stringliteral">&quot;all&quot;</span>).set(ifall)               % <span class="stringliteral">&quot;report only if all match&quot;</span></div>
<div class="line">);</div>
</div><!-- fragment --><p>If you like it more verbose you can use the function <code>one_of</code> instead of <code>operator |</code>: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    values(<span class="stringliteral">&quot;file&quot;</span>, files)                  % <span class="stringliteral">&quot;input filenames&quot;</span>,</div>
<div class="line">    (required(<span class="stringliteral">&quot;-s&quot;</span>) &amp; value(<span class="stringliteral">&quot;expr&quot;</span>, expr)) % <span class="stringliteral">&quot;string to look for&quot;</span>,</div>
<div class="line">    one_of( option(<span class="stringliteral">&quot;any&quot;</span>).set(ifany)       % <span class="stringliteral">&quot;report as soon as any matches&quot;</span>,</div>
<div class="line">            option(<span class="stringliteral">&quot;all&quot;</span>).set(ifall)       % <span class="stringliteral">&quot;report only if all match&quot;</span> )</div>
<div class="line">);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md43"></a>
gcc-style switches</h3>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">        format [-o &lt;output file&gt;] [-falign|-fnoalign)]</div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">        -o, --out &lt;file&gt;</div>
<div class="line">                output filename</div>
<div class="line"> </div>
<div class="line">        -falign, -fnoalign </div>
<div class="line">                control alignment</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">string</span> outfile = <span class="stringliteral">&quot;a.out&quot;</span>;</div>
<div class="line"><span class="keywordtype">bool</span> align = <span class="keyword">false</span>;</div>
<div class="line">     </div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    (option(<span class="stringliteral">&quot;-o&quot;</span>, <span class="stringliteral">&quot;--out&quot;</span>) &amp; value(<span class="stringliteral">&quot;output file&quot;</span>, outfile)) % <span class="stringliteral">&quot;output filename&quot;</span>,</div>
<div class="line">    ( option(<span class="stringliteral">&quot;-falign&quot;</span>  ).set(align,<span class="keyword">true</span>) |</div>
<div class="line">      option(<span class="stringliteral">&quot;-fnoalign&quot;</span>).set(align,<span class="keyword">false</span>) )                % <span class="stringliteral">&quot;control alignment&quot;</span></div>
<div class="line">);</div>
</div><!-- fragment --><p>Note, that the documentation string is attached to the group of parameters for better readability.</p>
<h3><a class="anchor" id="autotoc_md44"></a>
non-redundant prefix specification</h3>
<div class="fragment"><div class="line"><span class="comment">//has the same meaning as the code above</span></div>
<div class="line"><span class="keywordtype">string</span> outfile = <span class="stringliteral">&quot;a.out&quot;</span>;</div>
<div class="line"><span class="keywordtype">bool</span> align = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    (option(<span class="stringliteral">&quot;-o&quot;</span>, <span class="stringliteral">&quot;--out&quot;</span>) &amp; value(<span class="stringliteral">&quot;output file&quot;</span>, outfile)) % <span class="stringliteral">&quot;output filename&quot;</span>,</div>
<div class="line">    with_prefix(<span class="stringliteral">&quot;-f&quot;</span>, option(<span class="stringliteral">&quot;align&quot;</span>  ).set(align,<span class="keyword">true</span>) |</div>
<div class="line">                      option(<span class="stringliteral">&quot;noalign&quot;</span>).set(align,<span class="keyword">false</span>) )  % <span class="stringliteral">&quot;control alignment&quot;</span></div>
<div class="line">);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md45"></a>
merge alternatives with common prefixes in documentation</h3>
<div class="fragment"><div class="line">Usage:   format [-o &lt;output file&gt;] [-f(align|noalign)]</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keyword">auto</span> fmt = <a class="code hl_class" href="classclipp_1_1doc__formatting.html">doc_formatting</a>{}.<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a8a8f73311084afcf6ef3d5edf1046062">merge_alternative_flags_with_common_prefix</a>(<span class="keyword">true</span>);</div>
<div class="line">cout &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(cli, <span class="stringliteral">&quot;format&quot;</span>, fmt) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a8a8f73311084afcf6ef3d5edf1046062"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a8a8f73311084afcf6ef3d5edf1046062">clipp::doc_formatting::merge_alternative_flags_with_common_prefix</a></div><div class="ttdeci">doc_formatting &amp; merge_alternative_flags_with_common_prefix(bool yes=true)</div><div class="ttdoc">determines if alternative flags with a common prefix should be printed in a merged fashion</div><div class="ttdef"><b>Definition</b> clipp.h:5619</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md46"></a>
Commands</h2>
<p>**= positional, required flags** </p><div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">        make_doc new &lt;filename&gt; [-e &lt;enc&gt;]</div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">        -e, --encoding  &#39;utf8&#39; or &#39;cp1252&#39;, default is UTF-8</div>
</div><!-- fragment --><div class="fragment"><div class="line">std::string fname;</div>
<div class="line">std::string enc = <span class="stringliteral">&quot;utf8&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    command(<span class="stringliteral">&quot;new&quot;</span>),</div>
<div class="line">    value(<span class="stringliteral">&quot;filename&quot;</span>, fname),</div>
<div class="line">    option(<span class="stringliteral">&quot;-e&quot;</span>, <span class="stringliteral">&quot;--encoding&quot;</span>) &amp; value(<span class="stringliteral">&quot;enc&quot;</span>, enc).doc(<span class="stringliteral">&quot;&#39;utf8&#39; or &#39;cp1252&#39;, default is &quot;</span> + enc)</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md47"></a>
Nested Alternatives</h2>
<div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">        image-find help</div>
<div class="line">        image-find build (new|add) &lt;file&gt;... [-v] [-b [&lt;size=1024&gt;]] [--init|--no-init]</div>
<div class="line">        image-find query &lt;infile&gt; -o &lt;outfile&gt; [-f &lt;format&gt;]</div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">        -v, --verbose</div>
<div class="line">                print detailed report</div>
<div class="line"> </div>
<div class="line">        -b, --buffer [&lt;size=1024&gt;]</div>
<div class="line">                sets buffer size in KiByte</div>
<div class="line"> </div>
<div class="line">        --init, --no-init </div>
<div class="line">                do or don&#39;t initialize</div>
<div class="line"> </div>
<div class="line">        -f, --out-format &lt;format&gt;</div>
<div class="line">                determine output format</div>
</div><!-- fragment --><p>Value handling actions are omitted; see examples/nested_alternatives.cpp for a fully functional demo. </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    command(<span class="stringliteral">&quot;help&quot;</span>) </div>
<div class="line">    | ( command(<span class="stringliteral">&quot;build&quot;</span>),</div>
<div class="line">        ( command(<span class="stringliteral">&quot;new&quot;</span>) | command(<span class="stringliteral">&quot;add&quot;</span>)),                  </div>
<div class="line">        values(<span class="stringliteral">&quot;file&quot;</span>),</div>
<div class="line">        option(<span class="stringliteral">&quot;-v&quot;</span>, <span class="stringliteral">&quot;--verbose&quot;</span>)                           % <span class="stringliteral">&quot;print detailed report&quot;</span>,</div>
<div class="line">        (option(<span class="stringliteral">&quot;-b&quot;</span>, <span class="stringliteral">&quot;--buffer&quot;</span>) &amp; opt_value(<span class="stringliteral">&quot;size=1024&quot;</span>)) % <span class="stringliteral">&quot;sets buffer size in KiByte&quot;</span>,</div>
<div class="line">        ( option(<span class="stringliteral">&quot;--init&quot;</span>) | option(<span class="stringliteral">&quot;--no-init&quot;</span>) )          % <span class="stringliteral">&quot;do or don&#39;t initialize&quot;</span></div>
<div class="line">    ) </div>
<div class="line">    | ( command(<span class="stringliteral">&quot;query&quot;</span>),</div>
<div class="line">        value(<span class="stringliteral">&quot;infile&quot;</span>),</div>
<div class="line">        required(<span class="stringliteral">&quot;-o&quot;</span>, <span class="stringliteral">&quot;--out&quot;</span>) &amp; value(<span class="stringliteral">&quot;outfile&quot;</span>),</div>
<div class="line">        (option(<span class="stringliteral">&quot;-f&quot;</span>, <span class="stringliteral">&quot;--out-format&quot;</span>) &amp; value(<span class="stringliteral">&quot;format&quot;</span>))  % <span class="stringliteral">&quot;determine output format&quot;</span></div>
<div class="line">    )</div>
<div class="line">);</div>
</div><!-- fragment --><p>Note: </p><div class="fragment"><div class="line">doc_formatting::split_alternatives(bool)             //default: true</div>
<div class="line">doc_formatting::alternatives_min_split_size(int)     //default: 3</div>
</div><!-- fragment --><p> control if the usage is split up into several lines if any group inside an alternative exceeds a given minimum size.</p>
<h2><a class="anchor" id="autotoc_md48"></a>
Complex Nestings</h2>
<p>The combination of blocking parameters, alternatives and grouping makes it possible to define interfaces with decision trees/DAGs of arbitrary complexity. </p><div class="fragment"><div class="line">SYNOPSIS</div>
<div class="line">    complex_nesting [-v] [-i] (copy|move) [--all] [--replace] [-f] &lt;files&gt;... [-r] [-h]</div>
<div class="line">    complex_nesting [-v] [-i] compare (date|content) [-b] [-q] &lt;files&gt;... [-r] [-h]</div>
<div class="line">    complex_nesting [-v] [-i] merge (diff|patch) -o &lt;outdir&gt; [--show-conflicts] &lt;files&gt;... [-r] [-h]</div>
<div class="line">    complex_nesting [-v] [-i] merge content [--git-style] [-m &lt;marker&gt;] -o &lt;outdir&gt; [--show-conflicts] &lt;files&gt;... [-r] [-h]</div>
<div class="line">    complex_nesting [-v] [-i] list &lt;files&gt;... [-r] [-h]</div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">    user interface options:</div>
<div class="line">        -v, --verbose      show detailed output</div>
<div class="line">        -i, --interactive  use interactive mode</div>
<div class="line"> </div>
<div class="line">    copy mode:</div>
<div class="line">        --all              copy all</div>
<div class="line">        --replace          replace existing files</div>
<div class="line">        -f, --force        don&#39;t ask for confirmation</div>
<div class="line"> </div>
<div class="line">    compare mode:</div>
<div class="line">        -b, --binary       compare files byte by byte</div>
<div class="line">        -q, --quick        use heuristics for faster comparison</div>
<div class="line"> </div>
<div class="line">    merge mode:</div>
<div class="line">        diff               merge using diff</div>
<div class="line">        patch              merge using patch</div>
<div class="line">        content            merge based on content</div>
<div class="line"> </div>
<div class="line">        content based merge options:</div>
<div class="line">            --git-style    emulate git&#39;s merge behavior</div>
<div class="line">            &lt;marker&gt;       merge marker symbol</div>
<div class="line"> </div>
<div class="line">        &lt;outdir&gt;           target directory for merge result</div>
<div class="line">        --show-conflicts   show merge conflicts during run</div>
<div class="line"> </div>
<div class="line">    mode-independent options:</div>
<div class="line">        &lt;files&gt;...         input files</div>
<div class="line">        -r, --recursive    descend into subdirectories</div>
<div class="line">        -h, --help         show help</div>
</div><!-- fragment --><p>Actions and target variables are omitted in the code. </p><div class="fragment"><div class="line"><span class="keyword">auto</span> copyMode = <span class="stringliteral">&quot;copy mode:&quot;</span> % (</div>
<div class="line">    command(<span class="stringliteral">&quot;copy&quot;</span>) | command(<span class="stringliteral">&quot;move&quot;</span>),</div>
<div class="line">    option(<span class="stringliteral">&quot;--all&quot;</span>)         % <span class="stringliteral">&quot;copy all&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;--replace&quot;</span>)     % <span class="stringliteral">&quot;replace existing files&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;-f&quot;</span>, <span class="stringliteral">&quot;--force&quot;</span>) % <span class="stringliteral">&quot;don&#39;t ask for confirmation&quot;</span></div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> compareMode = <span class="stringliteral">&quot;compare mode:&quot;</span> % (</div>
<div class="line">    command(<span class="stringliteral">&quot;compare&quot;</span>),</div>
<div class="line">    (command(<span class="stringliteral">&quot;date&quot;</span>) | command(<span class="stringliteral">&quot;content&quot;</span>)),</div>
<div class="line">    option(<span class="stringliteral">&quot;-b&quot;</span>, <span class="stringliteral">&quot;--binary&quot;</span>) % <span class="stringliteral">&quot;compare files byte by byte&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;-q&quot;</span>, <span class="stringliteral">&quot;--quick&quot;</span>)  % <span class="stringliteral">&quot;use heuristics for faster comparison&quot;</span></div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> mergeAlgo = (</div>
<div class="line">    command(<span class="stringliteral">&quot;diff&quot;</span>)  % <span class="stringliteral">&quot;merge using diff&quot;</span>  |</div>
<div class="line">    command(<span class="stringliteral">&quot;patch&quot;</span>) % <span class="stringliteral">&quot;merge using patch&quot;</span> |</div>
<div class="line">    (   command(<span class="stringliteral">&quot;content&quot;</span>) % <span class="stringliteral">&quot;merge based on content&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;content based merge options:&quot;</span> % (</div>
<div class="line">          option(<span class="stringliteral">&quot;--git-style&quot;</span>) % <span class="stringliteral">&quot;emulate git&#39;s merge behavior&quot;</span>,</div>
<div class="line">          option(<span class="stringliteral">&quot;-m&quot;</span>, <span class="stringliteral">&quot;--marker&quot;</span>) &amp; value(<span class="stringliteral">&quot;marker&quot;</span>) % <span class="stringliteral">&quot;merge marker symbol&quot;</span></div>
<div class="line">        )</div>
<div class="line">    )</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> mergeMode = <span class="stringliteral">&quot;merge mode:&quot;</span> % (</div>
<div class="line">    command(<span class="stringliteral">&quot;merge&quot;</span>),</div>
<div class="line">    mergeAlgo,</div>
<div class="line">    required(<span class="stringliteral">&quot;-o&quot;</span>) &amp; value(<span class="stringliteral">&quot;outdir&quot;</span>) % <span class="stringliteral">&quot;target directory for merge result&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;--show-conflicts&quot;</span>)       % <span class="stringliteral">&quot;show merge conflicts during run&quot;</span></div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> firstOpt = <span class="stringliteral">&quot;user interface options:&quot;</span> % (</div>
<div class="line">    option(<span class="stringliteral">&quot;-v&quot;</span>, <span class="stringliteral">&quot;--verbose&quot;</span>)     % <span class="stringliteral">&quot;show detailed output&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;-i&quot;</span>, <span class="stringliteral">&quot;--interactive&quot;</span>) % <span class="stringliteral">&quot;use interactive mode&quot;</span></div>
<div class="line">);</div>
<div class="line"><span class="keyword">auto</span> lastOpt = <span class="stringliteral">&quot;mode-independent options:&quot;</span> % (</div>
<div class="line">    values(<span class="stringliteral">&quot;files&quot;</span>)             % <span class="stringliteral">&quot;input files&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;-r&quot;</span>, <span class="stringliteral">&quot;--recursive&quot;</span>) % <span class="stringliteral">&quot;descend into subdirectories&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;-h&quot;</span>, <span class="stringliteral">&quot;--help&quot;</span>)      % <span class="stringliteral">&quot;show help&quot;</span></div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    firstOpt,</div>
<div class="line">    copyMode | compareMode | mergeMode | command(<span class="stringliteral">&quot;list&quot;</span>),</div>
<div class="line">    lastOpt</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(parse(argc, argv, cli)) {</div>
<div class="line">     <span class="comment">// program logic...</span></div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keyword">auto</span> fmt = <a class="code hl_class" href="classclipp_1_1doc__formatting.html">doc_formatting</a>{}.<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a2d3b049f0590bc3376fc471034a310b2">doc_column</a>(31);</div>
<div class="line">    cout &lt;&lt; <a class="code hl_function" href="namespaceclipp.html#a3616cbfc340cc4e9e2890609ae1a808d">make_man_page</a>(cli, argv[0], fmt) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>You could of course write down everything as one big expression (docstrings are omitted)...: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    option(<span class="stringliteral">&quot;-v&quot;</span>, <span class="stringliteral">&quot;--verbose&quot;</span>),</div>
<div class="line">    option(<span class="stringliteral">&quot;-i&quot;</span>, <span class="stringliteral">&quot;--interactive&quot;</span>),</div>
<div class="line">    (</div>
<div class="line">        (   (command(<span class="stringliteral">&quot;copy&quot;</span>) | command(<span class="stringliteral">&quot;move&quot;</span>)),</div>
<div class="line">            option(<span class="stringliteral">&quot;--all&quot;</span>), option(<span class="stringliteral">&quot;--replace&quot;</span>),</div>
<div class="line">            option(<span class="stringliteral">&quot;-f&quot;</span>, <span class="stringliteral">&quot;--force&quot;</span>) </div>
<div class="line">        )</div>
<div class="line">        | ( command(<span class="stringliteral">&quot;compare&quot;</span>),</div>
<div class="line">            (command(<span class="stringliteral">&quot;date&quot;</span>) | command(<span class="stringliteral">&quot;content&quot;</span>)),</div>
<div class="line">            option(<span class="stringliteral">&quot;-b&quot;</span>, <span class="stringliteral">&quot;--binary&quot;</span>), option(<span class="stringliteral">&quot;-q&quot;</span>, <span class="stringliteral">&quot;--quick&quot;</span>) </div>
<div class="line">        ) </div>
<div class="line">        | ( command(<span class="stringliteral">&quot;merge&quot;</span>),</div>
<div class="line">            (</div>
<div class="line">                ( command(<span class="stringliteral">&quot;content&quot;</span>),</div>
<div class="line">                  option(<span class="stringliteral">&quot;--git-style&quot;</span>),</div>
<div class="line">                  option(<span class="stringliteral">&quot;-m&quot;</span>, <span class="stringliteral">&quot;--marker&quot;</span>) &amp; value(<span class="stringliteral">&quot;marker&quot;</span>)</div>
<div class="line">                )</div>
<div class="line">                | command(<span class="stringliteral">&quot;diff&quot;</span>)</div>
<div class="line">                | command(<span class="stringliteral">&quot;patch&quot;</span>)</div>
<div class="line">            ),</div>
<div class="line">            required(<span class="stringliteral">&quot;-o&quot;</span>) &amp; value(<span class="stringliteral">&quot;outdir&quot;</span>),</div>
<div class="line">            option(<span class="stringliteral">&quot;--show-conflicts&quot;</span>)</div>
<div class="line">        ) </div>
<div class="line">        | command(<span class="stringliteral">&quot;list&quot;</span>)</div>
<div class="line">    ),</div>
<div class="line">    values(<span class="stringliteral">&quot;files&quot;</span>),</div>
<div class="line">    option(<span class="stringliteral">&quot;-r&quot;</span>, <span class="stringliteral">&quot;--recursive&quot;</span>),</div>
<div class="line">    option(<span class="stringliteral">&quot;-h&quot;</span>, <span class="stringliteral">&quot;--help&quot;</span>)</div>
<div class="line">);</div>
</div><!-- fragment --><p> ...but it is probably more readable and maintainable if you break up the CLI definition into logical parts.</p>
<p>Note: </p><div class="fragment"><div class="line">doc_formatting::split_alternatives(bool)             //default: true</div>
<div class="line">doc_formatting::alternatives_min_split_size(int)     //default: 3</div>
</div><!-- fragment --><p> control whether the usage is split up into several lines if any group inside an alternative exceeds a given minimum size.</p>
<h2><a class="anchor" id="autotoc_md49"></a>
An Example From &lt;a href="http://docopt.org"</h2>
<p>&gt;docopt </p><div class="fragment"><div class="line">Naval Fate.</div>
<div class="line"> </div>
<div class="line">Usage:</div>
<div class="line">  naval_fate ship new &lt;name&gt;...</div>
<div class="line">  naval_fate ship &lt;name&gt; move &lt;x&gt; &lt;y&gt; [--speed= &lt;kn&gt;]</div>
<div class="line">  naval_fate ship shoot &lt;x&gt; &lt;y&gt;</div>
<div class="line">  naval_fate mine (set|remove) &lt;x&gt; &lt;y&gt; [--moored|--drifting]</div>
<div class="line">  naval_fate -h | --help</div>
<div class="line">  naval_fate --version</div>
<div class="line"> </div>
<div class="line">Options:</div>
<div class="line">  --speed= &lt;kn&gt;  Speed in knots [default: 10].</div>
<div class="line">  --moored       Moored (anchored) mine.</div>
<div class="line">  --drifting     Drifting mine.</div>
<div class="line">  -h, --help     Show this screen.</div>
<div class="line">  --version      Show version.</div>
</div><!-- fragment --><p>This code defines the command line interface, handles the parsing result and generates the above man page snippet. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> x = 0, y = 0;</div>
<div class="line"><span class="keywordtype">float</span> speed = 0.0f;</div>
<div class="line"><span class="keywordtype">bool</span> drift = <span class="keyword">true</span>;</div>
<div class="line">vector&lt;string&gt; names;</div>
<div class="line"><span class="keyword">enum class</span> mode { none, help, shipnew, shipmove, shipshoot, mineset, minerem};</div>
<div class="line">mode selected = mode::none;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//define command line interface</span></div>
<div class="line"><span class="keyword">auto</span> coordinates = ( value(<span class="stringliteral">&quot;x&quot;</span>, x), value(<span class="stringliteral">&quot;y&quot;</span>, y) );</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> shipnew  = ( command(<span class="stringliteral">&quot;new&quot;</span>).set(selected,mode::shipnew),</div>
<div class="line">                  values(<span class="stringliteral">&quot;name&quot;</span>, names) );</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> shipmove = (</div>
<div class="line">    value(<span class="stringliteral">&quot;name&quot;</span>, names),</div>
<div class="line">    command(<span class="stringliteral">&quot;move&quot;</span>).set(selected,mode::shipmove), coordinates,</div>
<div class="line">    option(<span class="stringliteral">&quot;--speed=&quot;</span>) &amp; value(<span class="stringliteral">&quot;kn&quot;</span>,speed) % <span class="stringliteral">&quot;Speed in knots [default: 10]&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> shipshoot = ( command(<span class="stringliteral">&quot;shoot&quot;</span>).set(selected,mode::shipshoot),</div>
<div class="line">                   coordinates );</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> mines = ( </div>
<div class="line">    command(<span class="stringliteral">&quot;mine&quot;</span>),</div>
<div class="line">    (command(<span class="stringliteral">&quot;set&quot;</span>   ).set(selected,mode::mineset) | </div>
<div class="line">     command(<span class="stringliteral">&quot;remove&quot;</span>).set(selected,mode::minerem) ),</div>
<div class="line">    coordinates,</div>
<div class="line">    (option(<span class="stringliteral">&quot;--moored&quot;</span>  ).set(drift,<span class="keyword">false</span>) % <span class="stringliteral">&quot;Moored (anchored) mine.&quot;</span> | </div>
<div class="line">     option(<span class="stringliteral">&quot;--drifting&quot;</span>).set(drift,<span class="keyword">true</span>)  % <span class="stringliteral">&quot;Drifting mine.&quot;</span>          )</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> navalcli = (</div>
<div class="line">    ( command(<span class="stringliteral">&quot;ship&quot;</span>), ( shipnew | shipmove | shipshoot ) )</div>
<div class="line">    | mines,</div>
<div class="line">    | command(<span class="stringliteral">&quot;-h&quot;</span>, <span class="stringliteral">&quot;--help&quot;</span>).set(selected,mode::help)     % <span class="stringliteral">&quot;Show this screen.&quot;</span></div>
<div class="line">    | command(<span class="stringliteral">&quot;--version&quot;</span>)([]{ cout &lt;&lt; <span class="stringliteral">&quot;version 1.0\n&quot;</span>; }) % <span class="stringliteral">&quot;Show version.&quot;</span></div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="namespaceclipp.html#a2b4c7356890e9113b5d6e9f351428f96">parse</a>(argc, argv, navalcli);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//handle results</span></div>
<div class="line"><span class="keywordflow">switch</span>(m) {</div>
<div class="line">    <span class="keywordflow">case</span> mode::none: </div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> mode::help: {</div>
<div class="line">        <span class="keyword">auto</span> fmt = <a class="code hl_class" href="classclipp_1_1doc__formatting.html">doc_formatting</a>{}</div>
<div class="line">            .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#aa7ff8e31d26e5b82b4f7026bc6032573">first_column</a>(2).<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a2d3b049f0590bc3376fc471034a310b2">doc_column</a>(16)</div>
<div class="line">            .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a59348be810593e7f896bfd24e759a85b">max_flags_per_param_in_usage</a>(4);</div>
<div class="line"> </div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Naval Fate.\n\nUsage:\n&quot;</span></div>
<div class="line">             &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(navalcli, <span class="stringliteral">&quot;naval_fate&quot;</span>, fmt)</div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot;\n\nOptions:\n&quot;</span></div>
<div class="line">             &lt;&lt; <a class="code hl_class" href="classclipp_1_1documentation.html">documentation</a>(navalcli, fmt) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">//... </span></div>
<div class="line">}</div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a59348be810593e7f896bfd24e759a85b"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a59348be810593e7f896bfd24e759a85b">clipp::doc_formatting::max_flags_per_param_in_usage</a></div><div class="ttdeci">doc_formatting &amp; max_flags_per_param_in_usage(int max)</div><div class="ttdoc">determines maximum number of flags per parameter to be printed in usage lines</div><div class="ttdef"><b>Definition</b> clipp.h:5594</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md50"></a>
Value Filters</h2>
<p>If a parameter doesn't have flags, i.e. it is a value-parameter, a filter function will be used to test if it matches an argument string. The default filter is <code>clipp::match::nonempty</code> which will match any non-empty argument string. If you want more control over what is matched, you can use some other predefined filters or you can write your own ones (see here).</p>
<div class="fragment"><div class="line">Usage:   exec [-n &lt;times&gt;] [-l &lt;line&gt;...] [-b &lt;ratio&gt;] [-f &lt;term&gt;]</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">int</span> n = 1;</div>
<div class="line">std::vector&lt;int&gt; lines;</div>
<div class="line"><span class="keywordtype">double</span> r = 1.0;</div>
<div class="line"><span class="keywordtype">string</span> term, name;</div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    option(<span class="stringliteral">&quot;-n&quot;</span>, <span class="stringliteral">&quot;--repeat&quot;</span>) &amp; integer(<span class="stringliteral">&quot;times&quot;</span>, n),</div>
<div class="line">    option(<span class="stringliteral">&quot;-l&quot;</span>, <span class="stringliteral">&quot;--line&quot;</span>)   &amp; integers(<span class="stringliteral">&quot;#&quot;</span>, lines),</div>
<div class="line">    option(<span class="stringliteral">&quot;-r&quot;</span>, <span class="stringliteral">&quot;--ratio)   &amp; number(&quot;</span>ratio<span class="stringliteral">&quot;, r),</span></div>
<div class="line"><span class="stringliteral">    option(&quot;</span>-f<span class="stringliteral">&quot;, &quot;</span>--find<span class="stringliteral">&quot;)   &amp; word(&quot;</span>term<span class="stringliteral">&quot;, term)</span></div>
<div class="line"><span class="stringliteral">);</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md51"></a>
Predefined Filtering Value-Parameters</h3>
<div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    value(<span class="stringliteral">&quot;x&quot;</span>),    <span class="comment">//non-empty string</span></div>
<div class="line">    word(<span class="stringliteral">&quot;x&quot;</span>),     <span class="comment">//alphanumeric string</span></div>
<div class="line">    number(<span class="stringliteral">&quot;x&quot;</span>),   <span class="comment">//string representing integer or floating point number</span></div>
<div class="line">    integer(<span class="stringliteral">&quot;x&quot;</span>)   <span class="comment">//string representing integral number</span></div>
<div class="line">);</div>
</div><!-- fragment --><p> Note that there are additional functions for</p><ul>
<li>optional parameters: <code>opt_value</code>, <code>opt_word</code>, ...</li>
<li>repeatable parameters: <code>values</code>, <code>words</code>, ...</li>
<li>repeatable, optional parameters: <code>opt_values</code>, <code>opt_words</code>, ...</li>
</ul>
<h3><a class="anchor" id="autotoc_md52"></a>
Using Filters Explicitly</h3>
<p>Two kinds of filters are supported right now that can be passed as first argument of <code>value</code>, <code>values</code>, <code>opt_value</code> or <code>opt_values</code> as well as argument of the constructor <code>parameter::parameter(Filter&amp;&amp;)</code></p><ul>
<li>Predicates <code>(const string&amp;) -&gt; bool</code> which should return true if and only if an argument is an exact match.</li>
<li>Substring matchers <code>(const string&amp;) -&gt; subrange</code> which in case of a match also indicate the position and length of the matched substring within a command line argument.</li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">string</span> s;</div>
<div class="line">value( match::length{1,5}, <span class="stringliteral">&quot;str&quot;</span>, s);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//or using the parameter class directly</span></div>
<div class="line"><span class="keyword">auto</span> p = <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>{ match::length{1,5} }</div>
<div class="line">         .positional(<span class="keyword">true</span>).<a class="code hl_function" href="classclipp_1_1parameter.html#ab80dc22eea997a29536884baed01ec60">required</a>(<span class="keyword">true</span>)</div>
<div class="line">         .label(<span class="stringliteral">&quot;str&quot;</span>).set(s);</div>
</div><!-- fragment --><p> There are a couple of predefined filters in <code>namespace <a class="el" href="namespaceclipp_1_1match.html" title="contains parameter matching functions and function classes">clipp::match</a></code>, but you can of course write your own ones (see here).</p>
<p>Here is another example that makes sure we don't catch any value starting with "-" as a filename: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (  </div>
<div class="line">    option(<span class="stringliteral">&quot;-a&quot;</span>)  </div>
<div class="line">    option(&quot;-f&quot;) &amp; value(match::prefix_not(&quot;-&quot;), &quot;filename&quot;),</div>
<div class="line">    option(&quot;-b&quot;)  </div>
<div class="line">);</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceclipp.html">clipp</a> {</div>
<div class="line"><span class="keyword">namespace </span>match {</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//simple predicates</span></div>
<div class="line">  <span class="keywordtype">bool</span> none (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp;);</div>
<div class="line">  <span class="keywordtype">bool</span> any (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp;);</div>
<div class="line">  <span class="keywordtype">bool</span> nonempty (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp;);</div>
<div class="line">  <span class="keywordtype">bool</span> alphabetic (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp;);</div>
<div class="line">  <span class="keywordtype">bool</span> alphanumeric (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp;);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//filters with settings and substring matching</span></div>
<div class="line">  <span class="keyword">class </span>numbers {</div>
<div class="line">      <span class="keyword">explicit</span> numbers(<span class="keywordtype">char</span> decimalPoint = <span class="charliteral">&#39;.&#39;</span>, <span class="keywordtype">char</span> digitSeparator = <span class="charliteral">&#39;,&#39;</span>, <span class="keywordtype">char</span> exponentSeparator = <span class="charliteral">&#39;e&#39;</span>);</div>
<div class="line">      <a class="code hl_class" href="classclipp_1_1subrange.html">subrange</a> operator () (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg);</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">class </span>integers {</div>
<div class="line">      <span class="keyword">explicit</span> integers(<span class="keywordtype">char</span> digitSeparator = <span class="charliteral">&#39;,&#39;</span>);</div>
<div class="line">      <a class="code hl_class" href="classclipp_1_1subrange.html">subrange</a> operator () (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg);</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">class </span>substring {</div>
<div class="line">      <span class="keyword">explicit</span> substring(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; str);</div>
<div class="line">      <a class="code hl_class" href="classclipp_1_1subrange.html">subrange</a> operator () (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg);</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">class </span>prefix {</div>
<div class="line">      <span class="keyword">explicit</span> prefix(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; prefix);</div>
<div class="line">      <a class="code hl_class" href="classclipp_1_1subrange.html">subrange</a> operator () (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg);</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">class </span>prefix_not {</div>
<div class="line">      <span class="keyword">explicit</span> prefix_not(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; prefix);</div>
<div class="line">      <a class="code hl_class" href="classclipp_1_1subrange.html">subrange</a> operator () (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg);</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">class </span>length {</div>
<div class="line">      <span class="keyword">explicit</span> length(<span class="keywordtype">size_t</span> exact);</div>
<div class="line">      <span class="keyword">explicit</span> length(<span class="keywordtype">size_t</span> min, <span class="keywordtype">size_t</span> max);</div>
<div class="line">      <a class="code hl_class" href="classclipp_1_1subrange.html">subrange</a> operator () (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg);</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">} }</div>
<div class="ttc" id="aclassclipp_1_1subrange_html"><div class="ttname"><a href="classclipp_1_1subrange.html">clipp::subrange</a></div><div class="ttdoc">(start,size) index range</div><div class="ttdef"><b>Definition</b> clipp.h:94</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md53"></a>
Greedy Parameters</h2>
<p>By default, the parser tries to identify a command line argument (in that order) as</p><ul>
<li>a single flag</li>
<li>a concatenation of multiple, <em>joinable</em> flags (in any order)</li>
<li>a concatenation of a <em>joinable</em> flag sequence in the order defined in the CLI code</li>
<li>a single value parameter</li>
<li>a concatenation of a <em>joinable</em> flag/value sequence in the order defined in the CLI code</li>
<li>a concatenation of <em>joinable</em> flags &amp; values in no particular order</li>
</ul>
<p>If no match was found, the parser tries the same list again without any restrictions imposed by blocking (positional) parameters, conflicting alternatives, etc. If this leads to any match, an error will be reported. This way, <em>potential</em>, but illegal matches can be found and, e.g., conflicting alternatives can be reported.</p>
<p>Consider this CLI: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (  option(<span class="stringliteral">&quot;-a&quot;</span>),  option(<span class="stringliteral">&quot;-f&quot;</span>) &amp; value(<span class="stringliteral">&quot;filename&quot;</span>),  option(<span class="stringliteral">&quot;-b&quot;</span>)  );</div>
</div><!-- fragment --><p> If we give <code>-f -b</code> or <code>-b -f -a</code> as command line arguments, an error will be reported, since the value after <code>-f</code> is not optional.</p>
<p>This behavior is fine for most use cases. But what if we want our program to take any string as a filename, because our filenames might also collide with flag names? We can make the <code>filename</code> value parameter greedy, so that the next string after <code>-f</code> will always be matched with highest priority as soon as <code>-f</code> was given: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (  option(<span class="stringliteral">&quot;-a&quot;</span>),  option(<span class="stringliteral">&quot;-f&quot;</span>) &amp; greedy(value(<span class="stringliteral">&quot;filename&quot;</span>)),  option(<span class="stringliteral">&quot;-b&quot;</span>)  );</div>
</div><!-- fragment --><p> or using <code>operator !</code>: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (  option(<span class="stringliteral">&quot;-a&quot;</span>),  option(<span class="stringliteral">&quot;-f&quot;</span>) &amp; !value(<span class="stringliteral">&quot;filename&quot;</span>),   option(<span class="stringliteral">&quot;-b&quot;</span>)  );</div>
</div><!-- fragment --><p>Now, every string coming after an <code>-f</code> will be used as filename.</p>
<p>If we don't want just <em>any</em> kind of match accepted, but still retain a higher priority for a value parameter, we could use a value filter: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (  </div>
<div class="line">    (   command(<span class="stringliteral">&quot;A&quot;</span>),</div>
<div class="line">        option(<span class="stringliteral">&quot;-f&quot;</span>) &amp; !value(match::prefix_not(<span class="stringliteral">&quot;-&quot;</span>), <span class="stringliteral">&quot;filename&quot;</span>),</div>
<div class="line">        option(<span class="stringliteral">&quot;-b&quot;</span>)  </div>
<div class="line">    ) |</div>
<div class="line">    (   command(<span class="stringliteral">&quot;B&quot;</span>),</div>
<div class="line">        option(<span class="stringliteral">&quot;-x&quot;</span>)  </div>
<div class="line">    )</div>
<div class="line">);</div>
</div><!-- fragment --><p> This way, the command line arguments <code>A -f B</code> will set the filename to "B" and produce no conflict error between the alternative commands <code>A</code> and <code>B</code> but <code>A -f -b</code> will still give an error.</p>
<p>Note, that there is an inherent decision problem: either we want the <code>filename</code> value to match no matter what, or we won't get proper error handling if someone forgets to specify a filename and gives <code>A -f -b</code> Also, there might be interfaces where we really want to catch something like <code>A -f B</code> as a command conflict.</p>
<h2><a class="anchor" id="autotoc_md54"></a>
Generalized Joinable Parameters</h2>
<p>Not only flags, but arbitrary combinations of flags and values can be made joinable. This feature is especially powerful if combined with repeatable groups. Important: in order for an argument to be matched by such expressions, no parameter requirements must be violated during the matching. Also, no partial argument matches are allowed.</p>
<h3><a class="anchor" id="autotoc_md55"></a>
Example 1: Counting Letters</h3>
<div class="fragment"><div class="line">Usage:   counter [a|b]...</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">int</span> as = 0, bs = 0;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = joinable( repeatable(</div>
<div class="line">        option(<span class="stringliteral">&quot;a&quot;</span>).call([&amp;]{++as;}) |</div>
<div class="line">        option(<span class="stringliteral">&quot;b&quot;</span>).call([&amp;]{++bs;})</div>
<div class="line">    ) );</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(<a class="code hl_function" href="namespaceclipp.html#a2b4c7356890e9113b5d6e9f351428f96">parse</a>(argc, argv, cli))     </div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;as: &quot;</span> &lt;&lt; as &lt;&lt; <span class="stringliteral">&quot;\nbs: &quot;</span> &lt;&lt; bs &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><span class="keywordflow">else</span> </div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Usage:\n&quot;</span> &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(cli, argv[0]) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
</div><!-- fragment --><p>Valid input includes: </p><div class="fragment"><div class="line">$ ./counter a                               </div>
<div class="line">$ ./counter b</div>
<div class="line">$ ./counter ab</div>
<div class="line">$ ./counter abba</div>
<div class="line">$ ./counter a b baba</div>
<div class="line">$ ./counter a babba abab abbbbba b a ba a</div>
<div class="line">    ...</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md56"></a>
Example 2: Listing Numbers</h3>
<div class="fragment"><div class="line">Usage:   numbers ([,] [&lt;number&gt;])...</div>
</div><!-- fragment --><div class="fragment"><div class="line">std::vector&lt;double&gt; nums;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = joinable(repeatable( option(<span class="stringliteral">&quot;,&quot;</span>) , opt_number(<span class="stringliteral">&quot;number&quot;</span>, nums) ));</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(parse(argc, argv, cli)) {</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;numbers:\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keyword">auto</span> n : nums) cout &lt;&lt; n &lt;&lt; <span class="stringliteral">&#39;\n&#39;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Usage:\n&quot;</span> &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(cli, argv[0]) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Valid input includes: </p><div class="fragment"><div class="line">$ ./numbers 1</div>
<div class="line">$ ./numbers 1 2 3</div>
<div class="line">$ ./numbers 1 , 2</div>
<div class="line">$ ./numbers 1 , 2 , 3</div>
<div class="line">$ ./numbers 1, 2, 3</div>
<div class="line">$ ./numbers 1 ,2 ,3</div>
<div class="line">$ ./numbers 1,2</div>
<div class="line">$ ./numbers 1,2,3</div>
<div class="line">$ ./numbers 1.1 , 2</div>
<div class="line">$ ./numbers 1,2.3,4.5</div>
<div class="line">$ ./numbers 1,2,3 4.2 5,6 2 7.1,8.23,9 </div>
</div><!-- fragment --><p><b>Warning:</b> Be careful with joinable and repeatable parameters! The resulting command line interface might be a lot less intuitive to use than you think. It can also be hard to get the "grammar" of complex parsing expressions right. The following definition for example, contains a subtle pitfall: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = joinable(repeatable( option(<span class="stringliteral">&quot;,&quot;</span>) , number(<span class="stringliteral">&quot;number&quot;</span>, nums) ));</div>
<div class="line"><span class="comment">//                                            ^^^ non-optional</span></div>
</div><!-- fragment --><p> This will not match arguments like <code>"1,"</code>. This is, because, if the repeat group is 'hit' by any of its child parameters, all non-optional parameters must also match within the current 'repeat cycle'. So, if the parser hits the <code>","</code> it expects to find a number arg as well, because it is blocking (positional) and required. Only after seeing this number can it enter the next repeat cycle. Thus, the argument will not be matched, since joined matches are only valid if no error occured. Making the number optional solves the problem.</p>
<h2><a class="anchor" id="autotoc_md57"></a>
Custom Value Filters</h2>
<p>Two kinds of filters are supported right now that can be passed as first argument of <code>value</code>, <code>values</code>, <code>opt_value</code> or <code>opt_values</code> as well as argument of the constructor <code>parameter::parameter(Filter&amp;&amp;)</code>:</p>
<ul>
<li>Predicates <code>(const string&amp;) -&gt; bool</code> which should return true if and only if an argument is an exact match.</li>
<li>Substring matchers <code>(const string&amp;) -&gt; subrange</code> which in case of a match also indicate the position and length of the matched substring within a command line argument.</li>
</ul>
<h3><a class="anchor" id="autotoc_md58"></a>
Simple Predicate Example</h3>
<div class="fragment"><div class="line">Usage:   annotate auto | (label &lt;character&gt;)</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">auto</span> is_char = [](<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg) { <span class="keywordflow">return</span> arg.size() == 1 &amp;&amp; std::isalpha(arg[0]); };</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">char</span> lbl = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><span class="keyword">auto</span> cli = (  command(<span class="stringliteral">&quot;auto&quot;</span>) | ( command(<span class="stringliteral">&quot;label&quot;</span>), value(is_char, <span class="stringliteral">&quot;character&quot;</span>, lbl) )  );</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md59"></a>
Substring Matcher Example</h3>
<p>Let's write a program that takes strings and lists all tag names (<code>&lt;tag&gt;</code>) contained in them: </p><div class="fragment"><div class="line">Usage:   tagnames &lt;string&gt;...</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">//custom filter</span></div>
<div class="line"><span class="keyword">auto</span> tag_name = [] (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg) {</div>
<div class="line">    <span class="keywordflow">if</span>(arg.size() &lt; 3) <span class="keywordflow">return</span> <a class="code hl_class" href="classclipp_1_1subrange.html">subrange</a>{}; <span class="comment">//too short</span></div>
<div class="line">    <span class="keyword">auto</span> i = arg.find(<span class="stringliteral">&quot;&lt;&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span>(i == string::npos) <span class="keywordflow">return</span> <a class="code hl_class" href="classclipp_1_1subrange.html">subrange</a>{}; <span class="comment">//no tag start found</span></div>
<div class="line">    <span class="keyword">auto</span> j = arg.find(<span class="stringliteral">&quot;&gt;&quot;</span>, i+1);</div>
<div class="line">    <span class="keywordflow">if</span>(j == string::npos) <span class="keywordflow">return</span> <a class="code hl_class" href="classclipp_1_1subrange.html">subrange</a>{}; <span class="comment">//didn&#39;t find end of tag</span></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_class" href="classclipp_1_1subrange.html">subrange</a>{i,j-i+1}; <span class="comment">//partial match {start, length}</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">std::set&lt;string&gt; tags;</div>
<div class="line"><span class="keyword">auto</span> cli = <a class="code hl_function" href="namespaceclipp.html#a2016b3961d790070f15fc25873232785">joinable</a>(</div>
<div class="line">    <a class="code hl_function" href="namespaceclipp.html#a4a3c31c8c4535b137c385d40a3a56ab3">values</a>(tag_name, <span class="stringliteral">&quot;string&quot;</span>, </div>
<div class="line">           [&amp;](<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg){ <span class="keywordflow">if</span>(arg[1] != <span class="charliteral">&#39;/&#39;</span>) tags.insert(arg);})</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(<a class="code hl_function" href="namespaceclipp.html#a2b4c7356890e9113b5d6e9f351428f96">parse</a>(argc, argv, cli)) {</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;tag names:\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; t : tags) cout &lt;&lt; t &lt;&lt; <span class="stringliteral">&#39;\n&#39;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Usage:\n&quot;</span> &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(cli, <span class="stringliteral">&quot;tagnames&quot;</span>) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceclipp_html_a4a3c31c8c4535b137c385d40a3a56ab3"><div class="ttname"><a href="namespaceclipp.html#a4a3c31c8c4535b137c385d40a3a56ab3">clipp::values</a></div><div class="ttdeci">parameter values(const doc_string &amp;label, Targets &amp;&amp;... tgts)</div><div class="ttdoc">makes required, blocking, repeatable value parameter; matches any non-empty string</div><div class="ttdef"><b>Definition</b> clipp.h:2237</div></div>
</div><!-- fragment --><div class="fragment"><div class="line">$ ./tagnames &quot;&lt;cee&gt;&lt;d&gt;&lt;e&gt;&lt;/e&gt;&lt;/d&gt;&lt;/cee&gt;&quot; &quot;&lt;a&gt;&lt;bo&gt;&lt;/bo&gt;&lt;/a&gt;&quot;</div>
<div class="line">tag names:</div>
<div class="line">&lt;a&gt;</div>
<div class="line">&lt;bo&gt;</div>
<div class="line">&lt;cee&gt;</div>
<div class="line">&lt;d&gt;</div>
<div class="line">&lt;e&gt;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md60"></a>
Sanity Checks</h2>
<p>Check, if no flag occurs as prefix of any other flag (identical flags will be ignored): </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( <span class="comment">/* command line interface definition */</span>);</div>
<div class="line"> </div>
<div class="line">assert( cli.<a class="code hl_function" href="classclipp_1_1group.html#ad428b619b0e04c5a7eeef051a9afb455">flags_are_prefix_free</a>() );</div>
<div class="ttc" id="aclassclipp_1_1group_html_ad428b619b0e04c5a7eeef051a9afb455"><div class="ttname"><a href="classclipp_1_1group.html#ad428b619b0e04c5a7eeef051a9afb455">clipp::group::flags_are_prefix_free</a></div><div class="ttdeci">bool flags_are_prefix_free() const</div><div class="ttdoc">returns true, if no flag occurs as true prefix of any other flag (identical flags will be ignored)</div><div class="ttdef"><b>Definition</b> clipp.h:3441</div></div>
</div><!-- fragment --><p>Check common prefix of all flags, like for example "-" (or "/" on Windows): </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( <span class="comment">/* command line interface definition */</span>);</div>
<div class="line"> </div>
<div class="line">assert( cli.<a class="code hl_function" href="classclipp_1_1group.html#a2a5993e17fab46d065428a46bc5b6e55">common_flag_prefix</a>() == <span class="stringliteral">&quot;-&quot;</span> );</div>
<div class="ttc" id="aclassclipp_1_1group_html_a2a5993e17fab46d065428a46bc5b6e55"><div class="ttname"><a href="classclipp_1_1group.html#a2a5993e17fab46d065428a46bc5b6e55">clipp::group::common_flag_prefix</a></div><div class="ttdeci">arg_string common_flag_prefix() const</div><div class="ttdoc">returns longest common prefix of all flags</div><div class="ttdef"><b>Definition</b> clipp.h:3463</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md61"></a>
Basic Error Handling</h2>
<p>Each parameter can have error handler functions/lambdas/function objects for different fail cases attached to it:</p><ul>
<li><code>if_repeated</code> is raised each time an argument is mapped to a parameter regardless of that parameter's repeatability setting</li>
<li><code>if_missing</code> is raised if a required parameter has no argument associated with it</li>
<li><code>if_conflicted</code> is raised if two or more arguments are mapped to more than one parameter of a group of alternatives</li>
<li><code>if_blocked</code> is raised if an argument can only be mapped to a parameter that was not reachable at the time (e.g. because a positional value was expected before that parameter or the parameter was in a non-active alternative branch)</li>
</ul>
<h3><a class="anchor" id="autotoc_md62"></a>
Example:</h3>
<div class="fragment"><div class="line">Usage:   send &lt;file&gt; -t &lt;target&gt;... [--http|--ftp]</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">string</span> filename;</div>
<div class="line">vector&lt;string&gt; targets;</div>
<div class="line">vector&lt;string&gt; wrong;</div>
<div class="line"><span class="keywordtype">bool</span> http = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> istarget = match::prefix_not(<span class="stringliteral">&quot;-&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    value(<span class="stringliteral">&quot;file&quot;</span>, filename)</div>
<div class="line">        .if_missing([]{ cout &lt;&lt; <span class="stringliteral">&quot;You need to provide a source filename!\n&quot;</span>; } )</div>
<div class="line">        .if_repeated([](<span class="keywordtype">int</span> idx){ cout &lt;&lt; <span class="stringliteral">&quot;Only one source file allowed! (index &quot;</span> &lt;&lt; idx &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>; } )</div>
<div class="line">    ,</div>
<div class="line">    <a class="code hl_function" href="namespaceclipp.html#a529ed76157c0cab73ab28e2e1815319f">required</a>(<span class="stringliteral">&quot;-t&quot;</span>) &amp; <a class="code hl_function" href="namespaceclipp.html#a4a3c31c8c4535b137c385d40a3a56ab3">values</a>(istarget, <span class="stringliteral">&quot;target&quot;</span>, targets)</div>
<div class="line">        .if_missing([]{ cout &lt;&lt; <span class="stringliteral">&quot;You need to provide at least one target filename!\n&quot;</span>; } )</div>
<div class="line">        .if_blocked([]{ cout &lt;&lt; <span class="stringliteral">&quot;Target names must not be given before the source file name!\n&quot;</span>; })</div>
<div class="line">    ,</div>
<div class="line">    <a class="code hl_function" href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">option</a>(<span class="stringliteral">&quot;--http&quot;</span>).set(http,<span class="keyword">true</span>) | </div>
<div class="line">    <a class="code hl_function" href="namespaceclipp.html#a49eecb5d433ae8b2a2af78ddc7464618">option</a>(<span class="stringliteral">&quot;--ftp&quot;</span>).set(http,<span class="keyword">false</span>) % <span class="stringliteral">&quot;protocol, default is http&quot;</span></div>
<div class="line">        .if_conflicted([]{ cout &lt;&lt; <span class="stringliteral">&quot;You can only use one protocol at a time!\n&quot;</span>; } )</div>
<div class="line">    ,</div>
<div class="line">    <a class="code hl_function" href="namespaceclipp.html#a711c11020498433d930caab6f2a88efb">any_other</a>(wrong)</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(<a class="code hl_function" href="namespaceclipp.html#a2b4c7356890e9113b5d6e9f351428f96">parse</a>(argc, argv, cli) &amp;&amp; wrong.empty()) {</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;OK\n&quot;</span>;</div>
<div class="line">    <span class="comment">/* ... */</span></div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; arg : wrong) cout &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; arg &lt;&lt; <span class="stringliteral">&quot;&#39; is not a valid argument\n&quot;</span>;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Usage:&quot;</span> &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(cli,argv[0]) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceclipp_html_a529ed76157c0cab73ab28e2e1815319f"><div class="ttname"><a href="namespaceclipp.html#a529ed76157c0cab73ab28e2e1815319f">clipp::required</a></div><div class="ttdeci">parameter required(String &amp;&amp;flag, Strings &amp;&amp;... flags)</div><div class="ttdoc">makes required non-blocking exact match parameter</div><div class="ttdef"><b>Definition</b> clipp.h:2176</div></div>
<div class="ttc" id="anamespaceclipp_html_a711c11020498433d930caab6f2a88efb"><div class="ttname"><a href="namespaceclipp.html#a711c11020498433d930caab6f2a88efb">clipp::any_other</a></div><div class="ttdeci">parameter any_other(Targets &amp;&amp;... tgts)</div><div class="ttdoc">makes catch-all value parameter</div><div class="ttdef"><b>Definition</b> clipp.h:2542</div></div>
</div><!-- fragment --><p> An error handler can either have an empty parameter list or take an <code>int</code> which is set to the command line argument index where the error occured first.</p>
<p>The catch-all parameter made by <code>any_other</code> is used to catch command line arguments that are not supported.</p>
<p>The value parameter <code>target</code> will only match command line arguments that do not begin with <code>"-"</code>, so that wrongly spelled options cannot be parsed as <code>target</code> value.</p>
<h2><a class="anchor" id="autotoc_md63"></a>
Parsing</h2>
<div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( </div>
<div class="line">    command(<span class="stringliteral">&quot;make&quot;</span>),</div>
<div class="line">    value(<span class="stringliteral">&quot;file&quot;</span>)           % <span class="stringliteral">&quot;name of file to make&quot;</span>,</div>
<div class="line">    option(<span class="stringliteral">&quot;-f&quot;</span>, <span class="stringliteral">&quot;--force&quot;</span>) % <span class="stringliteral">&quot;overwrite existing file&quot;</span></div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//excludes argv[0]</span></div>
<div class="line">parse(argc, argv, cli);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//if you want to include argv[0]</span></div>
<div class="line">parse(argv, argv+argc, cli);</div>
<div class="line"> </div>
<div class="line">parse({<span class="stringliteral">&quot;make&quot;</span>, <span class="stringliteral">&quot;out.txt&quot;</span>}, cli);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> args = std::vector&lt;std::string&gt; {<span class="stringliteral">&quot;make&quot;</span>, <span class="stringliteral">&quot;out.txt&quot;</span>, <span class="stringliteral">&quot;-f&quot;</span>};</div>
<div class="line"><a class="code hl_function" href="namespaceclipp.html#a2b4c7356890e9113b5d6e9f351428f96">parse</a>(args, cli);</div>
</div><!-- fragment --><p>The parse functions return an object of <code>parsing_result</code> which can be used for detailed analysis and will (explicitly) convert to false if any error occured during parsing. </p><div class="fragment"><div class="line"><span class="keyword">auto</span> result = parse(argc, argv, cli);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> doc_label = [](<span class="keyword">const</span> <a class="code hl_class" href="classclipp_1_1parameter.html">parameter</a>&amp; p) {</div>
<div class="line">    <span class="keywordflow">if</span>(!p.flags().empty()) <span class="keywordflow">return</span> p.flags().front();</div>
<div class="line">    <span class="keywordflow">if</span>(!p.label().empty()) <span class="keywordflow">return</span> p.label();</div>
<div class="line">    <span class="keywordflow">return</span> doc_string{<span class="stringliteral">&quot;&lt;?&gt;&quot;</span>};</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">cout &lt;&lt; <span class="stringliteral">&quot;args -&gt; parameter mapping:\n&quot;</span>;</div>
<div class="line"><span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; m : result) {</div>
<div class="line">    os &lt;&lt; <span class="stringliteral">&quot;#&quot;</span> &lt;&lt; m.index() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; m.arg() &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span>;</div>
<div class="line">    <span class="keyword">auto</span> p = m.param();</div>
<div class="line">    <span class="keywordflow">if</span>(p) {</div>
<div class="line">        os &lt;&lt; doc_label(*p) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span>;</div>
<div class="line">        <span class="keywordflow">if</span>(m.repeat() &gt; 0) {</div>
<div class="line">            os &lt;&lt; (m.bad_repeat() ? <span class="stringliteral">&quot;[bad repeat &quot;</span> : <span class="stringliteral">&quot;[repeat &quot;</span>)</div>
<div class="line">               &lt;&lt;  m.repeat() &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span>(m.blocked())  os &lt;&lt; <span class="stringliteral">&quot; [blocked]&quot;</span>;</div>
<div class="line">        <span class="keywordflow">if</span>(m.conflict()) os &lt;&lt; <span class="stringliteral">&quot; [conflict]&quot;</span>;</div>
<div class="line">        os &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        os &lt;&lt; <span class="stringliteral">&quot; [unmapped]\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">cout &lt;&lt; <span class="stringliteral">&quot;missing parameters:\n&quot;</span>;</div>
<div class="line"><span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; m : result.missing()) {</div>
<div class="line">    <span class="keyword">auto</span> p = m.param();</div>
<div class="line">    <span class="keywordflow">if</span>(p) {</div>
<div class="line">        os &lt;&lt; doc_label(*p) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span>;</div>
<div class="line">        os &lt;&lt; <span class="stringliteral">&quot; [missing after &quot;</span> &lt;&lt; m.after_index() &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md64"></a>
Documentation Generation</h2>
<p>Generate usage lines and documentation from parameters: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( <span class="comment">/* command line interface definition */</span> );</div>
<div class="line"> </div>
<div class="line"><span class="comment">//used default formatting</span></div>
<div class="line">cout &lt;&lt; <span class="stringliteral">&quot;Usage:\n&quot;</span> &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(cli, <span class="stringliteral">&quot;progname&quot;</span>)</div>
<div class="line">     &lt;&lt; <span class="stringliteral">&quot;\nOptions:\n&quot;</span> &lt;&lt; <a class="code hl_class" href="classclipp_1_1documentation.html">documentation</a>(cli) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
</div><!-- fragment --><p> ... or generate an entire man page in one go: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = ( <span class="comment">/* command line interface definition */</span> );</div>
<div class="line"> </div>
<div class="line">cout &lt;&lt; make_man_page(cli, <span class="stringliteral">&quot;progname&quot;</span>)</div>
<div class="line">        .prepend_section(<span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <span class="stringliteral">&quot;    The best thing since sliced bread.&quot;</span>)</div>
<div class="line">        .append_section(<span class="stringliteral">&quot;LICENSE&quot;</span>, <span class="stringliteral">&quot;    GPL3&quot;</span>);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md65"></a>
Example</h3>
<div class="fragment"><div class="line">DESCRIPTION</div>
<div class="line">    Builds a database of words from text files.</div>
<div class="line"> </div>
<div class="line">SYNOPSIS</div>
<div class="line">    worddb help</div>
<div class="line">    worddb build (new|add) &lt;file&gt;</div>
<div class="line">    worddb query -i &lt;infile&gt; [-p]</div>
<div class="line">    worddb info space</div>
<div class="line">    worddb info statistics (words|chars)</div>
<div class="line">    worddb remove (any|all) &lt;regex&gt;</div>
<div class="line">    worddb modify [-c] [-u] [-m &lt;size&gt;]</div>
<div class="line"> </div>
<div class="line">OPTIONS</div>
<div class="line">    build commands</div>
<div class="line">        new                  make new database</div>
<div class="line">        add                  append to existing database</div>
<div class="line"> </div>
<div class="line">    query settings</div>
<div class="line">        &lt;infile&gt;             input file</div>
<div class="line">        -p, --pretty-print   human friendly output</div>
<div class="line"> </div>
<div class="line">    database info modes</div>
<div class="line">        space                detailed memory occupation analysis</div>
<div class="line"> </div>
<div class="line">        statistics analysis</div>
<div class="line">            words            word frequency table</div>
<div class="line">            chars            character frequency table</div>
<div class="line"> </div>
<div class="line">    remove mode</div>
<div class="line">        &lt;regex&gt;              regular expression filter</div>
<div class="line"> </div>
<div class="line">    modification operations</div>
<div class="line">        -c, --compress       compress database in-memory</div>
<div class="line">        -u, --unique         keep only unique entries</div>
<div class="line">        -m, --memlimit       max. size in RAM</div>
<div class="line"> </div>
<div class="line">LICENSE</div>
<div class="line">    GPL3</div>
</div><!-- fragment --><p>The full code: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> cli = (</div>
<div class="line">    command(<span class="stringliteral">&quot;help&quot;</span>) | </div>
<div class="line">    ( command(<span class="stringliteral">&quot;build&quot;</span>),</div>
<div class="line">        <span class="stringliteral">&quot;build commands&quot;</span> %</div>
<div class="line">        (   command(<span class="stringliteral">&quot;new&quot;</span>)  % <span class="stringliteral">&quot;make new database&quot;</span></div>
<div class="line">          | command(<span class="stringliteral">&quot;add&quot;</span>)  % <span class="stringliteral">&quot;append to existing database&quot;</span></div>
<div class="line">        ),</div>
<div class="line">        value(<span class="stringliteral">&quot;file&quot;</span>)</div>
<div class="line">    ) | </div>
<div class="line">    ( command(<span class="stringliteral">&quot;query&quot;</span>),</div>
<div class="line">        <span class="stringliteral">&quot;query settings&quot;</span> %</div>
<div class="line">        (   required(<span class="stringliteral">&quot;-i&quot;</span>, <span class="stringliteral">&quot;--input&quot;</span>) &amp; value(<span class="stringliteral">&quot;infile&quot;</span>) % <span class="stringliteral">&quot;input file&quot;</span>,</div>
<div class="line">            option(<span class="stringliteral">&quot;-p&quot;</span>, <span class="stringliteral">&quot;--pretty-print&quot;</span>) % <span class="stringliteral">&quot;human friendly output&quot;</span>)</div>
<div class="line">    ) | </div>
<div class="line">    ( command(<span class="stringliteral">&quot;info&quot;</span>),</div>
<div class="line">        <span class="stringliteral">&quot;database info modes&quot;</span> % (</div>
<div class="line">            command(<span class="stringliteral">&quot;space&quot;</span>) % <span class="stringliteral">&quot;detailed memory occupation analysis&quot;</span> |</div>
<div class="line">            (</div>
<div class="line">                command(<span class="stringliteral">&quot;statistics&quot;</span>),</div>
<div class="line">                <span class="stringliteral">&quot;statistics analysis&quot;</span> % (</div>
<div class="line">                    command(<span class="stringliteral">&quot;words&quot;</span>) % <span class="stringliteral">&quot;word frequency table&quot;</span> |</div>
<div class="line">                    command(<span class="stringliteral">&quot;chars&quot;</span>) % <span class="stringliteral">&quot;character frequency table&quot;</span></div>
<div class="line">                )</div>
<div class="line">            )</div>
<div class="line">        )</div>
<div class="line">    ) | </div>
<div class="line">    <span class="stringliteral">&quot;remove mode&quot;</span> % (</div>
<div class="line">        command(<span class="stringliteral">&quot;remove&quot;</span>),</div>
<div class="line">        <span class="stringliteral">&quot;modify&quot;</span> % ( command(<span class="stringliteral">&quot;any&quot;</span>) | command(<span class="stringliteral">&quot;all&quot;</span>) ),</div>
<div class="line">        value(<span class="stringliteral">&quot;regex&quot;</span>) % <span class="stringliteral">&quot;regular expression filter&quot;</span></div>
<div class="line">    ) | </div>
<div class="line">    ( command(<span class="stringliteral">&quot;modify&quot;</span>),</div>
<div class="line">        <span class="stringliteral">&quot;modification operations&quot;</span> % (</div>
<div class="line">            option(<span class="stringliteral">&quot;-c&quot;</span>, <span class="stringliteral">&quot;--compress&quot;</span>) % <span class="stringliteral">&quot;compress database in-memory&quot;</span>,</div>
<div class="line">            option(<span class="stringliteral">&quot;-u&quot;</span>, <span class="stringliteral">&quot;--unique&quot;</span>)   % <span class="stringliteral">&quot;keep only unique entries&quot;</span>,</div>
<div class="line">            option(<span class="stringliteral">&quot;-m&quot;</span>, <span class="stringliteral">&quot;--memlimit&quot;</span>) % <span class="stringliteral">&quot;max. size in RAM&quot;</span> &amp; value(<span class="stringliteral">&quot;size&quot;</span>)</div>
<div class="line">        )</div>
<div class="line">    )</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> fmt = <a class="code hl_class" href="classclipp_1_1doc__formatting.html">doc_formatting</a>{} .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#aa7ff8e31d26e5b82b4f7026bc6032573">first_column</a>(4) .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a2d3b049f0590bc3376fc471034a310b2">doc_column</a>(28) .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a077bdec1a9c3bfd9c2a1cbe09aa17be4">last_column</a>(80);</div>
<div class="line"> </div>
<div class="line">cout &lt;&lt; make_man_page(cli, <span class="stringliteral">&quot;worddb&quot;</span>, fmt)</div>
<div class="line">    .prepend_section(<span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <span class="stringliteral">&quot;    Builds a database of words from text files.&quot;</span>)</div>
<div class="line">    .append_section(<span class="stringliteral">&quot;LICENSE&quot;</span>, <span class="stringliteral">&quot;    GPL3&quot;</span>) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md66"></a>
Formatting Options</h3>
<div class="fragment"><div class="line"><span class="comment">//all formatting options (with their default values)</span></div>
<div class="line"><span class="keyword">auto</span> fmt = <a class="code hl_class" href="classclipp_1_1doc__formatting.html">doc_formatting</a>{}</div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#aa7ff8e31d26e5b82b4f7026bc6032573">first_column</a>(8)                           <span class="comment">//left border column for text body</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a2d3b049f0590bc3376fc471034a310b2">doc_column</a>(20)                            <span class="comment">//column where parameter docstring starts</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a077bdec1a9c3bfd9c2a1cbe09aa17be4">last_column</a>(100)                          <span class="comment">//right border column for text body</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#abd332ba7c7a9fefa41f421f5912a51a3">indent_size</a>(4)                            <span class="comment">//indent of documentation lines for children of a documented group</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#abf8f6cfaa1d4cf72b1a5fa3953e7befa">line_spacing</a>(0)                           <span class="comment">//number of empty lines after single documentation lines</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a4279e922485651c7fb3a99308d6d55da">paragraph_spacing</a>(1)                      <span class="comment">//number of empty lines before and after paragraphs</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a5be1ebe5541bca4c9bb8afd0dc2dc600">flag_separator</a>(<span class="stringliteral">&quot;, &quot;</span>)                      <span class="comment">//between flags of the same parameter</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a74ac549ad18177d7e335ea2d63e4c6f6">param_separator</a>(<span class="stringliteral">&quot; &quot;</span>)                      <span class="comment">//between parameters </span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#adda1e24604edc5f52bc94011b9933f91">group_separator</a>(<span class="stringliteral">&quot; &quot;</span>)                      <span class="comment">//between groups (in usage)</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a2561e728e89ebd3c2947a6317cb91cd8">alternative_param_separator</a>(<span class="stringliteral">&quot;|&quot;</span>)          <span class="comment">//between alternative flags </span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#ad4017a54a9d5fb9eb8ae976d49984b93">alternative_group_separator</a>(<span class="stringliteral">&quot; | &quot;</span>)        <span class="comment">//between alternative groups </span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#ae0606d9033dca36b8d20fc66e5ce60e4">surround_group</a>(<span class="stringliteral">&quot;(&quot;</span>, <span class="stringliteral">&quot;)&quot;</span>)                  <span class="comment">//surround groups with these </span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#afccd8e2d8399a320b446c73fb78ded0e">surround_alternatives</a>(<span class="stringliteral">&quot;(&quot;</span>, <span class="stringliteral">&quot;)&quot;</span>)           <span class="comment">//surround group of alternatives with these</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a034990b6a3867b0ae3c01e54e79edc7d">surround_alternative_flags</a>(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)        <span class="comment">//surround alternative flags with these</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a223715bafaf6d06bcad6eb5d0ff78a80">surround_joinable</a>(<span class="stringliteral">&quot;(&quot;</span>, <span class="stringliteral">&quot;)&quot;</span>)               <span class="comment">//surround group of joinable flags with these</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a92b041e605cc4f1e2d53f30a1c891ed7">surround_optional</a>(<span class="stringliteral">&quot;[&quot;</span>, <span class="stringliteral">&quot;]&quot;</span>)               <span class="comment">//surround optional parameters with these</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#adad439e27fac49ddaff7ad9b9c7391bc">surround_repeat</a>(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;...&quot;</span>)                <span class="comment">//surround repeatable parameters with these</span></div>
<div class="line">    .surround_value(<span class="stringliteral">&quot;&lt;&quot;</span>, <span class="stringliteral">&quot;&gt;&quot;</span>)                  <span class="comment">//surround values with these</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#ae70ececcc5498e661829ff53978361ae">empty_label</a>(<span class="stringliteral">&quot;&quot;</span>)                           <span class="comment">//used if parameter has no flags and no label</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a59348be810593e7f896bfd24e759a85b">max_flags_per_param_in_usage</a>(1)           <span class="comment">//max. # of flags per parameter in usage</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a0d8381d072db73ea47be172bd8bd64e2">max_flags_per_param_in_doc</a>(32)            <span class="comment">//max. # of flags per parameter in detailed documentation</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#acf2ab19d13a17491d303e889bd875983">split_alternatives</a>(<span class="keyword">true</span>)                  <span class="comment">//split usage into several lines for large alternatives</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a416a38887d0f250afce0019fa29f6492">alternatives_min_split_size</a>(3)            <span class="comment">//min. # of parameters for separate usage line</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a8a8f73311084afcf6ef3d5edf1046062">merge_alternative_flags_with_common_prefix</a>(<span class="keyword">false</span>)  <span class="comment">//-ab(cdxy|xy) instead of -abcdxy|-abxy</span></div>
<div class="line">    .merge_joinable_flags_with_common_prefix(<span class="keyword">true</span>)     <span class="comment">//-abc instead of -a -b -c</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a24c927e30cb167320814b1ea578263ae">ignore_newline_chars</a>(<span class="keyword">false</span>)               <span class="comment">//ignore &#39;\n&#39; in docstrings</span></div>
<div class="line">    ;</div>
<div class="line"> </div>
<div class="line">cout &lt;&lt; <span class="stringliteral">&quot;Usage:\n&quot;</span> &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(cli, <span class="stringliteral">&quot;progname&quot;</span>, fmt)</div>
<div class="line">     &lt;&lt; <span class="stringliteral">&quot;\nOptions:\n&quot;</span> &lt;&lt; <a class="code hl_class" href="classclipp_1_1documentation.html">documentation</a>(cli, fmt) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//or generate entire man page in one go</span></div>
<div class="line">cout &lt;&lt; make_man_page(cli, <span class="stringliteral">&quot;progname&quot;</span>, fmt)</div>
<div class="line">        .prepend_section(<span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <span class="stringliteral">&quot;This program lets you format text.&quot;</span>)</div>
<div class="line">        .append_section(<span class="stringliteral">&quot;LICENSE&quot;</span>, <span class="stringliteral">&quot;GPLv3&quot;</span>);</div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a034990b6a3867b0ae3c01e54e79edc7d"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a034990b6a3867b0ae3c01e54e79edc7d">clipp::doc_formatting::surround_alternative_flags</a></div><div class="ttdeci">doc_formatting &amp; surround_alternative_flags(const string &amp;prefix, const string &amp;postfix)</div><div class="ttdoc">determines strings surrounding alternative flags</div><div class="ttdef"><b>Definition</b> clipp.h:5556</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a0d8381d072db73ea47be172bd8bd64e2"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a0d8381d072db73ea47be172bd8bd64e2">clipp::doc_formatting::max_flags_per_param_in_doc</a></div><div class="ttdeci">doc_formatting &amp; max_flags_per_param_in_doc(int max)</div><div class="ttdoc">determines maximum number of flags per parameter to be printed in detailed parameter documentation li...</div><div class="ttdef"><b>Definition</b> clipp.h:5586</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a223715bafaf6d06bcad6eb5d0ff78a80"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a223715bafaf6d06bcad6eb5d0ff78a80">clipp::doc_formatting::surround_joinable</a></div><div class="ttdeci">doc_formatting &amp; surround_joinable(const string &amp;prefix, const string &amp;postfix)</div><div class="ttdoc">determines strings surrounding joinable groups</div><div class="ttdef"><b>Definition</b> clipp.h:5576</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a24c927e30cb167320814b1ea578263ae"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a24c927e30cb167320814b1ea578263ae">clipp::doc_formatting::ignore_newline_chars</a></div><div class="ttdeci">doc_formatting &amp; ignore_newline_chars(bool yes=true)</div><div class="ttdoc">determines whether to ignore new line characters in docstrings</div><div class="ttdef"><b>Definition</b> clipp.h:5658</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a2561e728e89ebd3c2947a6317cb91cd8"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a2561e728e89ebd3c2947a6317cb91cd8">clipp::doc_formatting::alternative_param_separator</a></div><div class="ttdeci">doc_formatting &amp; alternative_param_separator(const string &amp;sep)</div><div class="ttdoc">determines string for separating alternative parameters</div><div class="ttdef"><b>Definition</b> clipp.h:5494</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a416a38887d0f250afce0019fa29f6492"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a416a38887d0f250afce0019fa29f6492">clipp::doc_formatting::alternatives_min_split_size</a></div><div class="ttdeci">doc_formatting &amp; alternatives_min_split_size(int size)</div><div class="ttdoc">determines how many children exclusive groups can have before their children are printed on individua...</div><div class="ttdef"><b>Definition</b> clipp.h:5650</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a4279e922485651c7fb3a99308d6d55da"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a4279e922485651c7fb3a99308d6d55da">clipp::doc_formatting::paragraph_spacing</a></div><div class="ttdeci">doc_formatting &amp; paragraph_spacing(int lines)</div><div class="ttdoc">determines number of empty rows before and after a paragraph; a paragraph is defined by a documented ...</div><div class="ttdef"><b>Definition</b> clipp.h:5611</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a5be1ebe5541bca4c9bb8afd0dc2dc600"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a5be1ebe5541bca4c9bb8afd0dc2dc600">clipp::doc_formatting::flag_separator</a></div><div class="ttdeci">doc_formatting &amp; flag_separator(const string &amp;sep)</div><div class="ttdoc">determines string for separating flags of the same parameter</div><div class="ttdef"><b>Definition</b> clipp.h:5508</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a74ac549ad18177d7e335ea2d63e4c6f6"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a74ac549ad18177d7e335ea2d63e4c6f6">clipp::doc_formatting::param_separator</a></div><div class="ttdeci">doc_formatting &amp; param_separator(const string &amp;sep)</div><div class="ttdoc">determines string for separating parameters</div><div class="ttdef"><b>Definition</b> clipp.h:5480</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_a92b041e605cc4f1e2d53f30a1c891ed7"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#a92b041e605cc4f1e2d53f30a1c891ed7">clipp::doc_formatting::surround_optional</a></div><div class="ttdeci">doc_formatting &amp; surround_optional(const string &amp;prefix, const string &amp;postfix)</div><div class="ttdoc">determines strings surrounding optional parameters/groups</div><div class="ttdef"><b>Definition</b> clipp.h:5526</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_abd332ba7c7a9fefa41f421f5912a51a3"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#abd332ba7c7a9fefa41f421f5912a51a3">clipp::doc_formatting::indent_size</a></div><div class="ttdeci">doc_formatting &amp; indent_size(int indent)</div><div class="ttdoc">determines indent of documentation lines for children of a documented group</div><div class="ttdef"><b>Definition</b> clipp.h:5468</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_abf8f6cfaa1d4cf72b1a5fa3953e7befa"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#abf8f6cfaa1d4cf72b1a5fa3953e7befa">clipp::doc_formatting::line_spacing</a></div><div class="ttdeci">doc_formatting &amp; line_spacing(int lines)</div><div class="ttdoc">determines number of empty rows after one single-line documentation entry</div><div class="ttdef"><b>Definition</b> clipp.h:5602</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_acf2ab19d13a17491d303e889bd875983"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#acf2ab19d13a17491d303e889bd875983">clipp::doc_formatting::split_alternatives</a></div><div class="ttdeci">doc_formatting &amp; split_alternatives(bool yes=true)</div><div class="ttdoc">determines if children of exclusive groups should be printed on individual lines if the exceed 'alter...</div><div class="ttdef"><b>Definition</b> clipp.h:5640</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_ad4017a54a9d5fb9eb8ae976d49984b93"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#ad4017a54a9d5fb9eb8ae976d49984b93">clipp::doc_formatting::alternative_group_separator</a></div><div class="ttdeci">doc_formatting &amp; alternative_group_separator(const string &amp;sep)</div><div class="ttdoc">determines string for separating alternative groups</div><div class="ttdef"><b>Definition</b> clipp.h:5501</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_adad439e27fac49ddaff7ad9b9c7391bc"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#adad439e27fac49ddaff7ad9b9c7391bc">clipp::doc_formatting::surround_repeat</a></div><div class="ttdeci">doc_formatting &amp; surround_repeat(const string &amp;prefix, const string &amp;postfix)</div><div class="ttdoc">determines strings surrounding repeatable parameters/groups</div><div class="ttdef"><b>Definition</b> clipp.h:5536</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_adda1e24604edc5f52bc94011b9933f91"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#adda1e24604edc5f52bc94011b9933f91">clipp::doc_formatting::group_separator</a></div><div class="ttdeci">doc_formatting &amp; group_separator(const string &amp;sep)</div><div class="ttdoc">determines string for separating groups (in usage lines)</div><div class="ttdef"><b>Definition</b> clipp.h:5487</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_ae0606d9033dca36b8d20fc66e5ce60e4"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#ae0606d9033dca36b8d20fc66e5ce60e4">clipp::doc_formatting::surround_group</a></div><div class="ttdeci">doc_formatting &amp; surround_group(const string &amp;prefix, const string &amp;postfix)</div><div class="ttdoc">determines strings surrounding non-exclusive groups</div><div class="ttdef"><b>Definition</b> clipp.h:5566</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_ae70ececcc5498e661829ff53978361ae"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#ae70ececcc5498e661829ff53978361ae">clipp::doc_formatting::empty_label</a></div><div class="ttdeci">doc_formatting &amp; empty_label(const string &amp;label)</div><div class="ttdoc">determines string to be used if a parameter has no flags and no label</div><div class="ttdef"><b>Definition</b> clipp.h:5473</div></div>
<div class="ttc" id="aclassclipp_1_1doc__formatting_html_afccd8e2d8399a320b446c73fb78ded0e"><div class="ttname"><a href="classclipp_1_1doc__formatting.html#afccd8e2d8399a320b446c73fb78ded0e">clipp::doc_formatting::surround_alternatives</a></div><div class="ttdeci">doc_formatting &amp; surround_alternatives(const string &amp;prefix, const string &amp;postfix)</div><div class="ttdoc">determines strings surrounding exclusive groups</div><div class="ttdef"><b>Definition</b> clipp.h:5546</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md67"></a>
Documentation Filtering</h2>
<p>The documentation generator class <code>documentation</code> can also take an additional third constructor argument that allows to filter parameters according to their properties.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) {</div>
<div class="line">    <span class="keyword">auto</span> cli = (</div>
<div class="line">        value(<span class="stringliteral">&quot;input file&quot;</span>),</div>
<div class="line">        option(<span class="stringliteral">&quot;-r&quot;</span>, <span class="stringliteral">&quot;--recursive&quot;</span>).set(rec).doc(<span class="stringliteral">&quot;convert files recursively&quot;</span>),</div>
<div class="line">        option(<span class="stringliteral">&quot;-o&quot;</span>) &amp; value(<span class="stringliteral">&quot;output format&quot;</span>, fmt),</div>
<div class="line">        option(<span class="stringliteral">&quot;-utf16&quot;</span>).set(utf16).doc(<span class="stringliteral">&quot;use UTF-16 encoding&quot;</span>)</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> fmt = <a class="code hl_class" href="classclipp_1_1doc__formatting.html">doc_formatting</a>{}.<a class="code hl_function" href="classclipp_1_1doc__formatting.html#a2d3b049f0590bc3376fc471034a310b2">doc_column</a>(28);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> filter = <a class="code hl_class" href="classclipp_1_1param__filter.html">param_filter</a>{}.<a class="code hl_function" href="classclipp_1_1param__filter.html#afd2f65b5e864abcb214af305241ccaeb">prefix</a>(<span class="stringliteral">&quot;--&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Usage:\n&quot;</span> &lt;&lt; <a class="code hl_class" href="classclipp_1_1usage__lines.html">usage_lines</a>(cli, argv[0]) &lt;&lt; <span class="stringliteral">&quot;\n\n&quot;</span></div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;Parameters:\n&quot;</span> &lt;&lt; <a class="code hl_class" href="classclipp_1_1documentation.html">documentation</a>(cli, fmt, filter) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;}</div>
<div class="ttc" id="aclassclipp_1_1param__filter_html"><div class="ttname"><a href="classclipp_1_1param__filter.html">clipp::param_filter</a></div><div class="ttdoc">filter predicate for parameters and groups; Can be used to limit documentation generation to paramete...</div><div class="ttdef"><b>Definition</b> clipp.h:5345</div></div>
<div class="ttc" id="aclassclipp_1_1param__filter_html_afd2f65b5e864abcb214af305241ccaeb"><div class="ttname"><a href="classclipp_1_1param__filter.html#afd2f65b5e864abcb214af305241ccaeb">clipp::param_filter::prefix</a></div><div class="ttdeci">param_filter &amp; prefix(const arg_string &amp;p) noexcept</div><div class="ttdoc">only allow parameters with given prefix</div><div class="ttdef"><b>Definition</b> clipp.h:5348</div></div>
</div><!-- fragment --><p>Which results in: </p><div class="fragment"><div class="line">Usage:</div>
<div class="line">        convert &lt;input file&gt; [-r] [-o &lt;output format&gt;] [-utf16]</div>
<div class="line"> </div>
<div class="line">Parameters:</div>
<div class="line">        -r, --recursive    convert files recursively</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md68"></a>
Parameter Filters</h3>
<p>Any function/lambda that maps a parameter to a bool can be used as filter predicate. CLIPP also comes with a default parameter filter class: </p><div class="fragment"><div class="line"><span class="comment">//all param_filter options (with their default values)</span></div>
<div class="line"><span class="keyword">auto</span> filter = <a class="code hl_class" href="classclipp_1_1param__filter.html">param_filter</a>{}</div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1param__filter.html#afd2f65b5e864abcb214af305241ccaeb">prefix</a>(<span class="stringliteral">&quot;&quot;</span>)               <span class="comment">//only parameters with given prefix</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1param__filter.html#a90dbe66f368e2fbc3e2b8b18940663bf">required</a>(tri::either)    <span class="comment">//required parameters </span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1param__filter.html#a4b9b45a5f2942836ff73b0c920600870">blocking</a>(tri::either)    <span class="comment">//blocking/positional parameters</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1param__filter.html#a0140f9aa18089bcd0ff737207a5968d1">repeatable</a>(tri::either)  <span class="comment">//repeatable parameters</span></div>
<div class="line">    .<a class="code hl_function" href="classclipp_1_1param__filter.html#aec19da31d402e5212e1feb3196840226">has_doc</a>(tri::yes)        <span class="comment">//parameters with/without docstrings</span></div>
<div class="line">    ;</div>
<div class="ttc" id="aclassclipp_1_1param__filter_html_a0140f9aa18089bcd0ff737207a5968d1"><div class="ttname"><a href="classclipp_1_1param__filter.html#a0140f9aa18089bcd0ff737207a5968d1">clipp::param_filter::repeatable</a></div><div class="ttdeci">param_filter &amp; repeatable(tri t) noexcept</div><div class="ttdoc">only allow parameters with given repeatable status</div><div class="ttdef"><b>Definition</b> clipp.h:5366</div></div>
<div class="ttc" id="aclassclipp_1_1param__filter_html_a4b9b45a5f2942836ff73b0c920600870"><div class="ttname"><a href="classclipp_1_1param__filter.html#a4b9b45a5f2942836ff73b0c920600870">clipp::param_filter::blocking</a></div><div class="ttdeci">param_filter &amp; blocking(tri t) noexcept</div><div class="ttdoc">only allow parameters with given blocking status</div><div class="ttdef"><b>Definition</b> clipp.h:5362</div></div>
<div class="ttc" id="aclassclipp_1_1param__filter_html_a90dbe66f368e2fbc3e2b8b18940663bf"><div class="ttname"><a href="classclipp_1_1param__filter.html#a90dbe66f368e2fbc3e2b8b18940663bf">clipp::param_filter::required</a></div><div class="ttdeci">param_filter &amp; required(tri t) noexcept</div><div class="ttdoc">only allow parameters with given requirement status</div><div class="ttdef"><b>Definition</b> clipp.h:5358</div></div>
<div class="ttc" id="aclassclipp_1_1param__filter_html_aec19da31d402e5212e1feb3196840226"><div class="ttname"><a href="classclipp_1_1param__filter.html#aec19da31d402e5212e1feb3196840226">clipp::param_filter::has_doc</a></div><div class="ttdeci">param_filter &amp; has_doc(tri t) noexcept</div><div class="ttdoc">only allow parameters with given docstring status</div><div class="ttdef"><b>Definition</b> clipp.h:5370</div></div>
</div><!-- fragment --><p> which uses a dedicated tristate type: </p><div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceclipp.html">clipp</a> {</div>
<div class="line">   <span class="keyword">enum class</span> <a class="code hl_enumeration" href="namespaceclipp.html#ad9bc4652de2e33d5c5f27def5aa5fe7c">tri</a> { no, yes, either };</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceclipp_html_ad9bc4652de2e33d5c5f27def5aa5fe7c"><div class="ttname"><a href="namespaceclipp.html#ad9bc4652de2e33d5c5f27def5aa5fe7c">clipp::tri</a></div><div class="ttdeci">tri</div><div class="ttdoc">tristate</div><div class="ttdef"><b>Definition</b> clipp.h:78</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md69"></a>
Motivation</h1>
<p>Well, I didn't find a library that makes building simple command line interfaces simple, yet can also be used to build complex CLIs. I really don't want to write 20 lines of boilerplate just to have 3 simple command line options. I also don't want to drag along monstrosities like boost or Qt for that. Over time, <em>clipp</em> evolved into a domain specific language (in pure C++) that I hope can at least somewhat approach the readability of <a href="http://docopt.org">docopt</a> but can leverage the benefits (toolability, etc.) of C++'s type system.</p>
<h3><a class="anchor" id="autotoc_md70"></a>
Other libraries (Boost, POCO, Qt, adishavit/Argh, Taywee/args ... or 'getopt')</h3>
<ul>
<li>often involve a lot of boilerplate (also for very simple use cases)</li>
<li>Some libs might be okay in terms of usability, but don't let you build complex interfaces with nested alternatives, mixed commands &amp; options, positional values, more than 2 flags per option, etc.</li>
<li>I really like ad-hoc parsers like <a href="https://github.com/adishavit/argh">Argh</a> for their simplicity, but they don't generate usage / man pages and don't allow complex interfaces with error checking.</li>
<li>Most libs make it really hard to figure out the resulting command line interface by looking at the code (OK, you be the judge if I did a better job at this...).</li>
<li>Some libs come with a ton of dependencies (Qt, Boost). I want a single header file!</li>
<li>Some libs require the separation of code related to one command/option. I find this harder to maintain than having everything related to one option in one place.</li>
<li>Sometimes flag strings of commands/options have to be repeated several times over.</li>
<li>Many libs come with restrictions regarding flag names, formatting, joinability, etc.</li>
</ul>
<h3><a class="anchor" id="autotoc_md71"></a>
What about &lt;a href="http://docopt.org" &gt;docopt&lt;/a&gt;?</h3>
<p>I like the basic idea, but I don't like redundancy in code, especially if it involves repeating string literals. Docopt generates a command line argument parser from a "man page docstring". After parsing, you have to query a dictionary to get values or check for option presence. That means you either have to mention the same flag names twice (in the docstring <em>and</em> in the query) or you have to use string variables which makes the docstring hard to read and kind of defeats the purpose of docopt. Furthermore, the code tends to be littered with string-to-whatever conversions.</p>
<p>I also wanted the ability to keep <em>everything</em> related to one option/command/value together in the code which I found very useful for programs with lots of command line options. Docopt doesn't let you do that since the interface definition and the code performing any actions is always separated (unless you give up on the "beautiful doc page" idea at the heart of docopt and build your input string to the parser generator piece-by-piece).</p>
<h1><a class="anchor" id="autotoc_md72"></a>
Design Goals</h1>
<ul>
<li>minimize boilerplate</li>
<li>simple code for simple use cases</li>
<li>good code readability (as far as C++ allows for it)</li>
<li>avoid ambiguities</li>
<li>eliminate repetitions</li>
<li>ability to keep code related to one option/command/value together</li>
<li>support many different command line interface conventions</li>
<li>support different coding styles, conventions &amp; tastes</li>
<li>value semantics wherever possible</li>
<li>do not break clipp's general interface and conventions in the future</li>
</ul>
<h1><a class="anchor" id="autotoc_md73"></a>
Requirements</h1>
<ul>
<li>requires a mostly C++11 conforming compiler</li>
</ul>
<h2><a class="anchor" id="autotoc_md74"></a>
Compilers, clipp compiles with</h2>
<ul>
<li>g++ 5.3.0, g++ 5.4.1, g++ 6, g++ 7</li>
<li>clang++ 3.8, clang++ 3.9, clang++ 4.0, clang++ 5.0</li>
<li>MSVC 14.11.25503 (compiler 19.11.25547)</li>
</ul>
<h1><a class="anchor" id="autotoc_md75"></a>
Feedback</h1>
<p>I would be delighted to hear from anyone who uses <em>clipp</em> in their project(s). If you find bugs or design flaws or want to suggest improvements please open an issue or submit a pull request.</p>
<h1><a class="anchor" id="autotoc_md76"></a>
Development</h1>
<p><em>clipp</em> is still very young, so I probably won't add new features any time soon and rather:</p><ul>
<li>fix bugs</li>
<li>improve test cases and coverage</li>
<li>add more code documentation</li>
<li>clean up the code / make it more understandable</li>
<li>add the ability to use other string classes </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
